(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fhir-primary","fhir-name"],{"07c9":function(t,e,i){"use strict";var a=i("b25d"),s=i.n(a);s.a},1131:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-select",{attrs:{loading:t.loading,label:t.display,items:t.items,outlined:"","hide-details":"auto","error-messages":t.errors,"item-text":"display","item-value":"code",disabled:t.disabled,rules:t.rules,dense:""},on:{change:function(e){t.errors=[]}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.display)+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(i("7db0"),i("b287")),n={name:"fhir-code",props:["field","min","max","base-min","base-max","label","binding","slotProps","path","edit","sliceName","readOnlyIfSet","constraints"],components:{IhrisElement:r["a"]},data:function(){return{value:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},disabled:!1,lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}var i=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(i).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.errors.push(e.message),t.loading=!1}))}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},displayValue:function(){var t=this,e=this.items.find((function(e){return e.code===t.value}));return e?e.display:""},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]}}},o=n,l=i("2877"),u=i("6544"),c=i.n(u),d=i("b974"),h=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=h.exports;c()(h,{VSelect:d["a"]})},"309c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("default",null,{source:t.source})],2)},s=[],r={name:"fhir-codeable-concept",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","binding","edit","constraints"],data:function(){return{source:{path:"",data:{},binding:this.binding},errors:[]}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},n=r,o=i("2877"),l=Object(o["a"])(n,a,s,!1,null,null,null);e["default"]=l.exports},"39e1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.edit?t._e():i("v-container",{staticClass:"my-3"},[t.isLeaveStock?i("div",{staticClass:"leave-notification"},[i("span",[t._v(t._s(t.monthlyLeaveMessage))])]):t._e(),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.columns,items:t.items,"item-key":"id","items-per-page":5,loading:t.loading,dense:""},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v(" "+t._s(t.title)+" ")]),i("v-spacer"),t._l(t.topActions,(function(e){return i("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,{}),color:e.class,small:""}},[t._v(" "+t._s(e.text)+" ")])}))],2)]},proxy:!0},{key:"item._action",fn:function(e){var a=e.item;return t._l(a.actions,(function(e){return i("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,a),color:e.class,small:"",rounded:""}},[t._v(" "+t._s(e.text)+" ")])}))}}],null,!1,3813068814)})],1)},s=[],r=(i("a623"),i("4de4"),i("7db0"),i("caad"),i("c975"),i("a15b"),i("baa5"),i("d81d"),i("d3b7"),i("ac1f"),i("2532"),i("3ca3"),i("5319"),i("1276"),i("9911"),i("ddb0"),i("b85c")),n=(i("96cf"),i("1da1")),o=function(t){return!!t&&t.constructor===Object},l={name:"ihris-secondary",props:["title","field","profile","slotProps","link-id","link-field","search-field","edit","columns","actions"],data:function(){return{source:{data:{},path:this.field},empty:!0,items:[],loading:!0,topActions:[],isLeaveStock:!1,monthlyLeaveDays:0}},mounted:function(){this.setupData(),this.$nextTick((function(){var t=this;if(this.profile.includes("http://ihris.org/fhir/StructureDefinition/ihris-job-description")){var e=this.linkField.replace(".","_").substring(this.linkField.lastIndexOf(".")),i="/fhir/"+this.field+"?"+e+"="+this.linkId;fetch(i).then((function(e){200===e.status&&e.json().then((function(e){if(e.entry){var i=e.entry[0].resource.extension,a=i.find((function(t){return"http://ihris.org/fhir/StructureDefinition/ihris-practitionerrole-first-employment-date"===t.url})).valueDate,s=(new Date).getFullYear(),r=new Date(a).getFullYear();t.monthlyLeaveDays=s-r}}))}))}}))},created:function(){var t=this;if(this.isLeaveStock=this.profile.includes("ihris-basic-ethiopia-leave-stock"),this.profile.includes("http://ihris.org/fhir/StructureDefinition/ihris-job-description")){var e=this.linkField.replace(".","_").substring(this.linkField.lastIndexOf(".")),i="/fhir/"+this.field+"?"+e+"="+this.linkId;fetch(i).then((function(e){200===e.status&&e.json().then((function(e){if(e.entry){var i=e.entry[0].resource.extension,a=i.find((function(t){return"http://ihris.org/fhir/StructureDefinition/ihris-practitionerrole-first-employment-date"===t.url})).valueDate,s=(new Date).getFullYear(),r=new Date(a).getFullYear();t.monthlyLeaveDays=s-r}}))}))}},methods:{setupData:function(){var t;if(2===this.searchField.split(":").length){var e=this.searchField.split(":")[0];t="fhir/"+e+"?_id="+this.linkId+"&_include="+this.searchField}else{t="/fhir/"+this.field;var i=[];this.profile&&i.push("_profile="+this.profile),this.searchField?i.push(this.searchField+"="+this.linkId):i.push(this.linkField.substring(this.linkField.indexOf(".")+1)+"="+this.linkId),t+="?"+i.join("&")}this.items=[],this.loading=!0,this.addItems(t)},addItems:function(t){var e=this;fetch(t).then((function(i){200===i.status?i.json().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(i){var a,s,n,o,l,u,c,d,h,p,f,v,m,b,y,x,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(i.entry&&i.entry.length>0)){t.next=52;break}a=Object(r["a"])(i.entry),t.prev=2,a.s();case 4:if((s=a.n()).done){t.next=42;break}if(n=s.value,2!==e.searchField.split(":").length||n.resource.resourceType!==e.searchField.split(":")[0]){t.next=8;break}return t.abrupt("continue",40);case 8:o={id:n.resource.id},l=Object(r["a"])(e.columns),t.prev=10,l.s();case 12:if((u=l.n()).done){t.next=28;break}if(c=u.value,"_action"!==c.value){t.next=16;break}return t.abrupt("continue",26);case 16:return t.prev=16,d=e.$fhirpath.evaluate(n.resource,c.value),t.next=20,e.processContent(d);case 20:o[c.value]=t.sent,t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](16),console.log(t.t0);case 26:t.next=12;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t["catch"](10),l.e(t.t1);case 33:return t.prev=33,l.f(),t.finish(33);case 36:o.actions||(o.actions=[]),h=Object(r["a"])(e.actions);try{for(h.s();!(p=h.n()).done;)f=p.value,f.row?f.condition?(v=e.$fhirpath.evaluate(n.resource,f.condition),v.every((function(t){return t}))&&o.actions.push(f)):o.actions.push(f):f.condition?(m=e.$fhirpath.evaluate(n.resource,f.condition),f.hasOwnProperty("meets")?f.meets=f.meets&&m.every((function(t){return t})):f.meets=m.every((function(t){return t}))):f.meets=!0}catch(k){h.e(k)}finally{h.f()}e.items.push(o);case 40:t.next=4;break;case 42:t.next=47;break;case 44:t.prev=44,t.t2=t["catch"](2),a.e(t.t2);case 47:return t.prev=47,a.f(),t.finish(47);case 50:t.next=54;break;case 52:b=Object(r["a"])(e.actions);try{for(b.s();!(y=b.n()).done;)x=y.value,x.row||(x.meets=x.emptyDisplay)}catch(k){b.e(k)}finally{b.f()}case 54:e.topActions=e.actions.filter((function(t){return!t.row&&t.meets})),i.link?(g=i.link.find((function(t){return"next"===t.relation})),g?e.addItems(g.url):e.loading=!1):e.loading=!1;case 56:case"end":return t.stop()}}),t,null,[[2,44,47,50],[10,30,33,36],[16,23]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,console.log(t)})):(e.loading=!1,console.log("Unable to fetch",t,i.status))})).catch((function(t){e.loading=!1,console.log(t)}))},processContent:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(e)){t.next=7;break}return t.next=3,Promise.all(e.map(this.processContent));case 3:return i=t.sent,t.abrupt("return",i.join(" "));case 7:if(!o(e)){t.next=32;break}if(!e.code||!e.system){t.next=14;break}return t.next=11,this.$fhirutils.codeLookup(e.system,e.code);case 11:return t.abrupt("return",t.sent);case 14:if(!e.display){t.next=18;break}return t.abrupt("return",e.display);case 18:if(!e.code){t.next=22;break}return t.abrupt("return",e.code);case 22:if(!e.reference){t.next=28;break}return t.next=25,this.$fhirutils.resourceLookup(e.reference);case 25:return t.abrupt("return",t.sent);case 28:return console.log("Unable to process content:",e),t.abrupt("return","Unknown");case 30:t.next=33;break;case 32:return t.abrupt("return",e);case 33:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setupLink:function(t,e){return t.replace("ITEMID",e.id).replace("FHIRID",this.linkId)}}},u=l,c=(i("07c9"),i("2877")),d=i("6544"),h=i.n(d),p=i("8336"),f=i("a523"),v=i("8fea"),m=i("2fa4"),b=i("71d9"),y=i("2a7f"),x=Object(c["a"])(u,a,s,!1,null,"4195cb78",null);e["default"]=x.exports;h()(x,{VBtn:p["a"],VContainer:f["a"],VDataTable:v["a"],VSpacer:m["a"],VToolbar:b["a"],VToolbarTitle:y["a"]})},"45dd":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-text-field",t._g({attrs:{label:t.label,"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",rules:t.rules,"error-messages":t.errors,dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.label)+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}],null,!0),model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}},a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t.isEthiopian?i("v-container",{staticClass:"ma-0 pa-0"},[i("v-row",{attrs:{"no-gutters":""}},[i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-title",{staticClass:"primary white--text"},[t._v(" Ethiopian Calendar"),i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!t.showGregorian}}},[t.showGregorian?i("v-icon",[t._v("mdi-calendar")]):i("v-icon",[t._v("mdi-calendar-multiple")])],1)],1),"year"===t.pickerType?i("v-card-text",[i("br"),i("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1):i("v-ethiopian-date-picker",{ref:"etPicker",attrs:{label:"Ethiopian",color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.maxValueETDateTime,min:t.minValueETDateTime,type:t.pickerType,disabled:t.disabled,locale:"am"},on:{change:t.save},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1),t.showGregorian?i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-title",{staticClass:"primary white--text"},[t._v(" Gregorian Calendar"),i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),"year"===t.pickerType?i("v-card-text",[i("br"),i("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):i("v-date-picker",{ref:"gPicker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e()],1)],1):"year"===t.pickerType?i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-text",[i("br"),i("v-text-field",{attrs:{type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1):i("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.label)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(i("d81d"),i("a9e3"),i("d3b7"),i("ac1f"),i("25f0"),i("466d"),i("4d90"),i("1276"),i("3835")),n=i("b287"),o=i("c472"),l=i("08e0"),u=i.n(l),c={name:"fhir-date-time",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDateTime","maxValueDateTime","minValueQuantity","maxValueQuantity","displayType","readOnlyIfSet","calendar","constraints"],components:{IhrisElement:n["a"],VEthiopianDatePicker:o["a"]},data:function(){return{value:null,etValue:null,menu:!1,source:{path:"",data:{}},qField:"valueDateTime",pickerType:"date",disabled:!1,showGregorian:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},computed:{dateValueMax:function(){if(this.maxValueQuantity){var t=this.convertQuantity(this.maxValueQuantity,"add");if(t)return t}if(this.maxValueDate)return this.maxValueDate},dateValueMin:function(){if(this.minValueQuantity){var t=this.convertQuantity(this.minValueQuantity,"subtract");if(t)return t}else if(this.minValueDate)return this.minValueDate},minYear:function(){return this.dateValueMin?this.dateValueMin.substring(0,4):void 0},maxYear:function(){return this.dateValueMax?this.dateValueMax.substring(0,4):void 0},minYearET:function(){return this.minValueETDate?this.minValueETDate.substring(0,4):void 0},maxYearET:function(){return this.maxValueETDate?this.maxValueETDate.substring(0,4):void 0},isEthiopian:function(){return"Ethiopian"===this.calendar},minValueETDateTime:function(){return this.dateValueMin?this.convertGE(this.dateValueMin):null},maxValueETDateTime:function(){return this.dateValueMax?this.convertGE(this.dateValueMax):null},displayValue:function(){return this.isEthiopian?this.value&&"Ethiopian: "+this.etValue+" Gregorian: "+this.value:this.value},index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.label+" is required"}]:[]}},watch:{menu:function(t){var e=this;this.isEthiopian?!this.value&&t&&setTimeout((function(){return e.$refs.etPicker.activePicker="YEAR"})):!this.value&&t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"}))},showGregorian:function(t){var e=this;!this.value&&t&&setTimeout((function(){return e.$refs.gPicker.activePicker="YEAR"}))},slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},value:function(t){t?"year"===this.pickerType?4===t.length&&(this.etValue=this.convertGE(t)):this.etValue=this.convertGE(t):this.etValue=t},etValue:function(t){t?"year"===this.pickerType?4===t.length&&(this.value=this.convertEG(t)):this.value=this.convertEG(t):this.value=t}},methods:{convertQuantity:function(t,e){var i={a:"years",mo:"months",wk:"weeks",d:"days"},a=/(-?\d+)([a-z]{1,3})/,s=t.match(a);if(3===s.length)try{var r=s[1],n=i[s[2]];return"subtract"===e?this.$moment(this.$moment().subtract(r,n)).format("YYYY-MM-DD"):this.$moment(this.$moment().add(r,n)).format("YYYY-MM-DD")}catch(o){console.log("Failed to get date from quantity",o)}},convertGE:function(t){if(!t)return t;var e=t.split("-").map(Number),i=Object(r["a"])(e,3),a=i[0],s=i[1],n=i[2];if("year"===this.pickerType){var o=u.a.ge(a,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=u.a.ge(a,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},convertEG:function(t){if(!t)return t;var e=t.split("-").map(Number),i=Object(r["a"])(e,3),a=i[0],s=i[1],n=i[2];if("year"===this.pickerType){var o=u.a.eg(a,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=u.a.eg(a,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}},save:function(t){this.errors=[],this.$refs.menu.save(t)}}},d=c,h=i("2877"),p=i("6544"),f=i.n(p),v=i("8336"),m=i("b0af"),b=i("99d9"),y=i("a523"),x=i("2e4b"),g=i("132d"),k=i("e449"),_=i("0fd9"),V=i("2fa4"),w=i("8654"),P=Object(h["a"])(d,a,s,!1,null,null,null);e["default"]=P.exports;f()(P,{VBtn:v["a"],VCard:m["a"],VCardText:b["c"],VCardTitle:b["d"],VContainer:y["a"],VDatePicker:x["a"],VIcon:g["a"],VMenu:k["a"],VRow:_["a"],VSpacer:V["a"],VTextField:w["a"]})},"6b10":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("default",null,{source:t.source})],2)},s=[],r=(i("ac1f"),i("5319"),{name:"fhir-extension",props:["field","sliceName","min","max","base-min","base-max","profile","slotProps","path","edit","constraints"],data:function(){return{source:{path:"",data:[]},errors:[]}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t;t=this.profile?this.profile:this.sliceName;var e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+t+"')");this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e)}}}}),n=r,o=i("2877"),l=Object(o["a"])(n,a,s,!1,null,null,null);e["default"]=l.exports},"6dbd":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return""!==t.intro.fullname?i("div",{class:["ihris-intro-container",t.hasScrolled||this.isQuestionnaire?"show":"hide"]},[i("v-img",{staticClass:"photo",attrs:{src:t.photoURL,contain:"","max-height":150,position:"left"}}),i("div",{staticClass:"ihris-intro"},[i("span",[t._v("Employee ID : "+t._s(t.intro.employeeID))]),i("span",[t._v("Full name : "+t._s(t.intro.fullname))]),i("span",[t._v("Date of Birth : "+t._s(t.intro.birthDate))]),i("span",[t._v("Gender : "+t._s(t.intro.gender))])])],1):t._e()},s=[],r=(i("4de4"),i("b0c0"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),{name:"ihris-practitioner-intro",props:["slotProps","isQuestionnaire"],data:function(){return{intro:{display:"Health Worker",fullname:"",photoURL:"",birthDate:"",gender:"",employeeID:""},hasScrolled:!1}},components:{},mounted:function(){this.isQuestionnaire?window.removeEventListener("scroll",this.handleScroll):window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){var e=this.slotProps.source.data,i=e.name[0].given[0];this.intro.gender=e.gender,this.intro.birthDate=e.birthDate,this.intro.employeeID=e.identifier[0].value;var a=e.extension[0];a=a.extension;var s=a.filter((function(t){return"fathers"===t.url})),r=a.filter((function(t){return"grandfatherslastname"===t.url})),n=e.photo[0];if(this.intro.fullname=i+" "+s[0].valueString+" "+r[0].valueString,n.data&&n.contentType){var o="data:"+n.contentType+";base64,"+n.data;fetch(o).then((function(t){return t.blob()})).then((function(e){t.photoURL=URL.createObjectURL(e)})).catch((function(t){console.log("Failed to get data from base64.",t)}))}}},handleScroll:function(t){console.log(window.top.scrollY),this.hasScrolled=window.top.scrollY>=100,console.log(t)},toggleContent:function(){this.showMore=!this.showMore}}}),n=r,o=(i("ae4e"),i("2877")),l=i("6544"),u=i.n(l),c=i("adda"),d=Object(o["a"])(n,a,s,!1,null,"23658de9",null);e["default"]=d.exports;u()(d,{VImg:c["a"]})},7372:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"my-3"},[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t._t("default",null,{source:t.source}),i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{size:"50",color:"primary",indeterminate:""}})],1),i("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",right:"",permanent:"",clipped:""}},[i("v-list",{staticClass:"white--text"},[i("v-list-item",[t.edit?i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.go(0)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-pencil-off")]),i("span",[t._v("Cancel")])],1):i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$emit("set-edit",!t.edit)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-pencil")]),i("span",[t._v("Edit")])],1),i("v-spacer"),t.edit?[t.valid?i("v-btn",{staticClass:"success darken-1",attrs:{dark:"",disabled:!t.valid},on:{click:function(e){return t.processFHIR()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v("Save")])],1):i("v-btn",{staticClass:"warning",attrs:{dark:""},on:{click:function(e){return t.$refs.form.validate()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v("Save")])],1)]:t._e()],2),i("v-divider",{attrs:{color:"white"}}),!t.edit&&t.links&&t.links.length?t._l(t.links,(function(e,a){return i("v-list-item",{key:e.url},[i("v-btn",{key:e.url,staticClass:"primary",attrs:{text:!e.button,to:t.getLinkUrl(e)}},[e.icon?i("v-icon",{attrs:{light:""}},[t._v(t._s(e.icon))]):t._e(),t._v(" "+t._s(t.linktext[a])+" ")],1)],1)})):t._e(),t.sectionMenu?i("v-subheader",{staticClass:"white--text"},[i("h2",[t._v("Sections")])]):t._e(),t._l(t.sectionMenu,(function(e){return i("v-list-item",{key:e.name,class:"#section-"+e.name===t.path?"highlighted":"",attrs:{href:"#section-"+e.name}},[t.edit&&e.secondary?t._e():i("v-list-item-content",{staticClass:"white--text"},[i("v-list-item-title",{staticClass:"text-uppercase"},[i("h4",[t._v(t._s(e.title))])]),i("v-list-item-subtitle",{staticClass:"white--text"},[t._v(t._s(e.desc))])],1)],1)}))],2)],1)],2)],1)},s=[],r=(i("caad"),i("fb6a"),i("b64b"),i("d3b7"),i("ac1f"),i("2532"),i("5319"),i("1276"),i("2ca0"),i("96cf"),i("1da1")),n=i("b85c"),o={name:"ihris-resource",props:["title","field","fhir-id","page","profile","section-menu","edit","links","constraints"],data:function(){return{fhir:{},orig:{},valid:!0,source:{data:{},path:""},loading:!1,overlay:!1,isEdit:!1,linktext:[],advancedValid:!0,path:""}},created:function(){var t=this;if(this.fhirId)this.loading=!0,fetch("/fhir/"+this.field+"/"+this.fhirId).then((function(e){e.json().then((function(e){t.orig=e,t.source={data:e,path:t.field},t.setLinkText(),t.loading=!1})).catch((function(e){console.log(t.field,t.fhirId,e)}))})).catch((function(e){console.log(t.field,t.fhirId,e)}));else if(this.$route.query){for(var e={resourceType:this.field},i=!1,a=0,s=Object.keys(this.$route.query);a<s.length;a++){var r=s[a];if(r.startsWith(this.field+".")){i=!0;var o,l=r.substring(this.field.length+1).split("."),u=l.pop(),c=e,d=Object(n["a"])(l);try{for(d.s();!(o=d.n()).done;){var h=o.value;if(h.includes("["))try{var p=h.split("["),f=p[0],v=p[1].slice(0,-1);if(c.hasOwnProperty(f)||(c[f]=[]),v){var m={};c[f][parseInt(v)]=m,c=m}else{var b={};c[f].push(b),c=b}}catch(k){console.log("Unable to process",r);continue}else c.hasOwnProperty(h)||(c[h]={},c=c[h])}}catch(k){d.e(k)}finally{d.f()}if(u.includes("["))try{var y=u.split("["),x=y[0],g=y[1].slice(0,-1);c.hasOwnProperty(x)||(c[x]=[]),g?c[x][parseInt(g)]=this.$route.query[r]:c[x].push(this.$route.query[r])}catch(k){console.log("Unable to process",r);continue}else c[u]=this.$route.query[r]}}i&&(this.source={data:e,path:this.field})}},watch:{$route:function(t,e){console.log(t,e),console.log("HASH ",this.$route.hash),this.path=this.$route.hash}},computed:{hasFhirId:function(){return""!=this.fhirId&&!!this.fhirId}},methods:{getLinkField:function(t){var e=this.$fhirpath.evaluate(this.source.data,t);return!!e&&e[0]},getLinkUrl:function(t){var e;if(t.field&&(e=this.getLinkField(t.field)),e){if(e.includes("/")){var i=e.split("/");e=i[1]}return t.url.replace("FIELD",e)}return t.url},setLinkText:function(){var t=this,e=function(e){var i=t.links[e];if(i.text)t.linktext[e]=i.text;else if(i.field){var a=t.getLinkField(i.field);a&&t.$fhirutils.lookup(a).then((function(i){t.$set(t.linktext,e,i)}))}};for(var i in this.links)e(i)},processFHIR:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$refs.form.validate(),this.valid){t.next=3;break}return t.abrupt("return");case 3:return this.advancedValid=!0,this.overlay=!0,this.loading=!0,e=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(i,a,r){var o,l,u,c,d,h,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=Object(n["a"])(r),t.prev=1,o.s();case 3:if((l=o.n()).done){t.next=36;break}if(u=l.value,c=i,d=a,u.field&&!u.fieldType&&(h=void 0,u.sliceName?u.field.startsWith("value[x]")?(h=u.field.substring(9),c+="."+h):(h=u.field.replace(":"+u.sliceName,""),c+="."+h):(h=u.field,c+="."+h),"1"!==u.max||"1"!==u.baseMax?a.hasOwnProperty(h)||(d[h]=[]):d[h]={},u.hasOwnProperty("value")?(Array.isArray(d[h])?d[h].push(u.value):d[h]=u.value,d=d[h]):Array.isArray(d[h])?(p={},u.profile?p.url=u.profile:"extension"===h&&u.sliceName&&(p.url=u.sliceName),d[h].push(p),d=p):d=d[h]),!u.$children){t.next=18;break}return t.prev=9,t.next=12,e(c,d,u.$children);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](9),s.advancedValid=!1,console.log(t.t0);case 18:if(!u.constraints){t.next=34;break}if(u.errors=[],t.prev=20,t.t1=s.advancedValid,!t.t1){t.next=26;break}return t.next=25,s.$fhirutils.checkConstraints(u.constraints,s.constraints,d,u.errors,s.fhirId);case 25:t.t1=t.sent;case 26:s.advancedValid=t.t1,t.next=34;break;case 29:t.prev=29,t.t2=t["catch"](20),s.advancedValid=!1,u.errors.push("An unknown error occurred."),console.log(t.t2);case 34:t.next=3;break;case 36:t.next=41;break;case 38:t.prev=38,t.t3=t["catch"](1),o.e(t.t3);case 41:return t.prev=41,o.f(),t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[1,38,41,44],[9,14],[20,29]])})));return function(e,i,a){return t.apply(this,arguments)}}(),this.fhir={resourceType:this.field,meta:{profile:[this.profile]}},t.prev=8,t.next=11,e(this.field,this.fhir,this.$children);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](8),this.advancedValid=!1,console.log(t.t0);case 17:if(this.advancedValid){t.next=22;break}return this.overlay=!1,this.loading=!1,this.$store.commit("setMessage",{type:"error",text:"There were errors on the form."}),t.abrupt("return");case 22:console.log("FINISHED PROCESS AND CHECK."),i="/fhir/"+this.field,a={method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual"},this.fhirId&&(this.fhir.id=this.fhirId,i+="/"+this.fhirId,a.method="PUT"),a.body=JSON.stringify(this.fhir),console.log("SAVE",i,this.fhir),fetch(i,a).then((function(t){201!==t.status&&200!==t.status||t.json().then((function(t){s.overlay=!1,s.loading=!1,s.fhirId?(s.$store.commit("setMessage",{type:"success",text:"Update successful."}),setTimeout((function(){return s.$router.go(0)}),2e3)):s.$router.push({name:"resource_view",params:{page:s.page,id:t.id}})}))}));case 29:case"end":return t.stop()}}),t,this,[[8,13]])})));function e(){return t.apply(this,arguments)}return e}()}},l=o,u=(i("7f06"),i("2877")),c=i("6544"),d=i.n(c),h=i("8336"),p=i("a523"),f=i("ce7e"),v=i("4bd4"),m=i("132d"),b=i("8860"),y=i("da13"),x=i("5d23"),g=i("f774"),k=i("a797"),_=i("490a"),V=i("2fa4"),w=i("e0c7"),P=Object(u["a"])(l,a,s,!1,null,null,null);e["default"]=P.exports;d()(P,{VBtn:h["a"],VContainer:p["a"],VDivider:f["a"],VForm:v["a"],VIcon:m["a"],VList:b["a"],VListItem:y["a"],VListItemContent:x["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VNavigationDrawer:g["a"],VOverlay:k["a"],VProgressCircular:_["a"],VSpacer:V["a"],VSubheader:w["a"]})},"7f06":function(t,e,i){"use strict";var a=i("9090"),s=i.n(a);s.a},"7fb0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-text-field",t._g({attrs:{label:t.label,"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",rules:t.rules,"error-messages":t.errors,dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.label)+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}],null,!0),model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}},a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t.isEthiopian?i("v-container",{staticClass:"ma-0 pa-0"},[i("v-row",{attrs:{"no-gutters":""}},[i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-title",{staticClass:"primary white--text"},[t._v(" Ethiopian Calendar"),i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!t.showGregorian}}},[t.showGregorian?i("v-icon",[t._v("mdi-calendar")]):i("v-icon",[t._v("mdi-calendar-multiple")])],1)],1),"year"===t.pickerType?i("v-card-text",[i("br"),i("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYearET,max:t.maxYearET,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1):i("v-ethiopian-date-picker",{ref:"etPicker",attrs:{label:"Ethiopian",color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.maxValueETDate,min:t.minValueETDate,type:t.pickerType,disabled:t.disabled,locale:"am"},on:{change:t.save},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1),t.showGregorian?i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-title",{staticClass:"primary white--text"},[t._v(" Gregorian Calendar"),i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),"year"===t.pickerType?i("v-card-text",[i("br"),i("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):i("v-date-picker",{ref:"gPicker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e()],1)],1):"year"===t.pickerType?i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-text",[i("br"),i("v-text-field",{attrs:{type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1):i("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.label)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(i("d81d"),i("a9e3"),i("d3b7"),i("ac1f"),i("25f0"),i("466d"),i("4d90"),i("1276"),i("3835")),n=i("b287"),o=i("c472"),l=i("08e0"),u=i.n(l),c={name:"fhir-date",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDate","maxValueDate","minValueQuantity","maxValueQuantity","displayType","readOnlyIfSet","calendar","constraints"],components:{IhrisElement:n["a"],VEthiopianDatePicker:o["a"]},data:function(){return{value:null,etValue:null,menu:!1,source:{path:"",data:{}},qField:"valueDate",pickerType:"date",disabled:!1,showGregorian:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},computed:{dateValueMax:function(){if(this.maxValueQuantity){var t=this.convertQuantity(this.maxValueQuantity,"add");if(t)return t}if(this.maxValueDate)return this.maxValueDate},dateValueMin:function(){if(this.minValueQuantity){var t=this.convertQuantity(this.minValueQuantity,"subtract");if(t)return t}else if(this.minValueDate)return this.minValueDate},minYear:function(){return this.dateValueMin?this.dateValueMin.substring(0,4):void 0},maxYear:function(){return this.dateValueMax?this.dateValueMax.substring(0,4):void 0},minYearET:function(){return this.minValueETDate?this.minValueETDate.substring(0,4):void 0},maxYearET:function(){return this.maxValueETDate?this.maxValueETDate.substring(0,4):void 0},isEthiopian:function(){return"Ethiopian"===this.calendar},minValueETDate:function(){return this.dateValueMin?this.convertGE(this.dateValueMin):null},maxValueETDate:function(){return this.dateValueMax?this.convertGE(this.dateValueMax):null},displayValue:function(){return this.isEthiopian?this.value&&"Ethiopian: "+this.etValue+" Gregorian: "+this.value:this.value},index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.label+" is required"}]:[]}},watch:{menu:function(t){var e=this;"year"!==this.pickerType&&(this.isEthiopian?!this.value&&t&&setTimeout((function(){return e.$refs.etPicker.activePicker="YEAR"})):!this.value&&t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"})))},showGregorian:function(t){var e=this;!this.value&&t&&setTimeout((function(){return e.$refs.gPicker.activePicker="YEAR"}))},slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},value:function(t){t?"year"===this.pickerType?4===t.length&&(this.etValue=this.convertGE(t)):this.etValue=this.convertGE(t):this.etValue=t},etValue:function(t){t?"year"===this.pickerType?4===t.length&&(this.value=this.convertEG(t)):this.value=this.convertEG(t):this.value=t}},methods:{convertQuantity:function(t,e){var i={a:"years",mo:"months",wk:"weeks",d:"days"},a=/(-?\d+)([a-z]{1,3})/,s=t.match(a);if(3===s.length)try{var r=s[1],n=i[s[2]];return"subtract"===e?this.$moment(this.$moment().subtract(r,n)).format("YYYY-MM-DD"):this.$moment(this.$moment().add(r,n)).format("YYYY-MM-DD")}catch(o){console.log("Failed to get date from quantity",o)}},convertGE:function(t){if(!t)return t;var e=t.split("-").map(Number),i=Object(r["a"])(e,3),a=i[0],s=i[1],n=i[2];if("year"===this.pickerType){var o=u.a.ge(a,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=u.a.ge(a,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},convertEG:function(t){if(!t)return t;var e=t.split("-").map(Number),i=Object(r["a"])(e,3),a=i[0],s=i[1],n=i[2];if("year"===this.pickerType){var o=u.a.eg(a,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=u.a.eg(a,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}},save:function(t){this.errors=[],this.$refs.menu.save(t)}}},d=c,h=i("2877"),p=i("6544"),f=i.n(p),v=i("8336"),m=i("b0af"),b=i("99d9"),y=i("a523"),x=i("2e4b"),g=i("132d"),k=i("e449"),_=i("0fd9"),V=i("2fa4"),w=i("8654"),P=Object(h["a"])(d,a,s,!1,null,null,null);e["default"]=P.exports;f()(P,{VBtn:v["a"],VCard:m["a"],VCardText:b["c"],VCardTitle:b["d"],VContainer:y["a"],VDatePicker:x["a"],VIcon:g["a"],VMenu:k["a"],VRow:_["a"],VSpacer:V["a"],VTextField:w["a"]})},8308:function(t,e,i){},"89c1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-complex-card",{attrs:{complexField:t.field,slotProps:t.slotProps,label:t.label,errors:t.errors},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},s=[],r=i("fa57"),n={name:"fhir-human-name",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit","constraints"],data:function(){return{errors:[]}},components:{IhrisComplexCard:r["a"]}},o=n,l=i("2877"),u=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=u.exports},9090:function(t,e,i){},ae4e:function(t,e,i){"use strict";var a=i("d55f"),s=i.n(a);s.a},b25d:function(t,e,i){},b287:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.edit?i("v-container",[t._t("form")],2):i("div",[i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._t("header")],2),t.loading?i("v-col",{attrs:{cols:t.$store.state.cols.content}},[i("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}})],1):i("v-col",{attrs:{cols:t.$store.state.cols.content}},[t._t("value")],2)],1),i("v-divider")],1)],1)},s=[],r={name:"ihris-element",props:["edit","loading"]},n=r,o=i("2877"),l=i("6544"),u=i.n(l),c=i("62ad"),d=i("a523"),h=i("ce7e"),p=i("8e36"),f=i("0fd9"),v=Object(o["a"])(n,a,s,!1,null,null,null);e["a"]=v.exports;u()(v,{VCol:c["a"],VContainer:d["a"],VDivider:h["a"],VProgressLinear:p["a"],VRow:f["a"]})},b78c:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-text-field",{attrs:{"error-messages":t.errors,disabled:t.disabled,label:t.display,outlined:"","hide-details":"auto",rules:t.rules,type:t.isPassword?t.showPassword?"text":"password":"text","append-icon":t.isPassword?t.showPassword?"mdi-eye":"mdi-eye-off":"",dense:""},on:{change:function(e){t.errors=[]},"click:append":function(e){t.showPassword=!t.showPassword}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.display)),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.value)+" ")]},proxy:!0}])})},s=[],r=i("b287"),n={name:"fhir-string",props:["field","label","min","max","id","path","slotProps","sliceName","base-min","base-max","edit","readOnlyIfSet","constraints","displayType"],components:{IhrisElement:r["a"]},data:function(){return{source:{path:"",data:{}},value:"",showPassword:!1,qField:"valueString",disabled:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]},isPassword:function(){return"password"===this.displayType}}},o=n,l=i("2877"),u=i("6544"),c=i.n(u),d=i("8654"),h=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=h.exports;c()(h,{VTextField:d["a"]})},bb1d:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.simpleDisplay?i("div",[i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._v(t._s(t.label))]),i("v-col",{attrs:{cols:t.$store.state.cols.header}},[t._v(t._s(t.simpleValue))])],1),i("v-divider")],1):i("v-container",[i("v-card",[t.edit?i("v-system-bar",{attrs:{color:"secondary",dark:""}},[t._v(" "+t._s(t.label)+" "),i("v-spacer"),t.subAvailable?i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.removeRow()}}},[i("v-icon",{staticClass:"font-weight-bold"},[t._v("mdi-minus")])],1):t._e(),t.addAvailable?i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.addRow()}}},[i("v-icon",[t._v("mdi-plus")])],1):t._e()],1):t._e(),t._l(t.inputs,(function(e){return t._t("default",null,{input:e,source:e.source})}))],2)],1)],1)},s=[],r=(i("caad"),i("a15b"),i("a434"),i("ac1f"),i("5319"),{name:"ihris-array",props:["label","min","max","id","path","slotProps","field","fieldType","profile","targetProfile","sliceName","edit"],data:function(){return{inputs:[],source:{path:"",data:[]},isArray:!0,lockWatch:!1}},created:function(){this.setupInputs()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupInputs()},deep:!0}},methods:{setupInputs:function(){this.inputs=[],this.source={path:this.path,data:{}};var t=this.path;if(this.slotProps&&this.slotProps.source){var e=this.field;this.sliceName&&(e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+this.profile+"')")),this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),this.source.data.length>0&&(this.lockWatch=!0)}for(var i=0;i<this.actualMin;i++){var a=this.label;this.displayIndex&&(a+=" ("+(i+1)+")");var s={label:a,index:i,data:void 0};this.source.data[i]&&(s.source={data:this.source.data[i],path:t+"["+i+"]",fromArray:!0}),this.inputs.push(s)}},addRow:function(){if(this.lockWatch=!0,this.addAvailable){var t=this.label;this.displayIndex&&(t+=" ("+(this.inputs.length+1)+")"),this.inputs.push({label:t,index:this.inputs.length})}},removeRow:function(){this.subAvailable&&this.inputs.splice(-1)},getField:function(){return this.field}},computed:{actualMin:function(){return Math.max(this.min,this.source.data.length>0?this.source.data.length:0)},addAvailable:function(){return"*"===this.max||this.inputs.length<this.max},displayIndex:function(){return"*"===this.max||this.max>1},subAvailable:function(){return this.actualMin<this.inputs.length},simpleDisplay:function(){return!this.edit&&["string"].includes(this.fieldType)},simpleValue:function(){return this.source.data.join(" ")}}}),n=r,o=i("2877"),l=i("6544"),u=i.n(l),c=i("8336"),d=i("b0af"),h=i("62ad"),p=i("a523"),f=i("ce7e"),v=i("132d"),m=i("0fd9"),b=i("2fa4"),y=(i("a9e3"),i("c7cd"),i("5530")),x=(i("8308"),i("3a66")),g=i("a9ad"),k=i("7560"),_=i("58df"),V=i("80d2"),w=Object(_["a"])(Object(x["a"])("bar",["height","window"]),g["a"],k["a"]).extend({name:"v-system-bar",props:{height:[Number,String],lightsOut:Boolean,window:Boolean},computed:{classes:function(){return Object(y["a"])({"v-system-bar--lights-out":this.lightsOut,"v-system-bar--absolute":this.absolute,"v-system-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-system-bar--window":this.window},this.themeClasses)},computedHeight:function(){return this.height?isNaN(parseInt(this.height))?this.height:parseInt(this.height):this.window?32:24},styles:function(){return{height:Object(V["h"])(this.computedHeight)}}},methods:{updateApplication:function(){return this.$el?this.$el.clientHeight:this.computedHeight}},render:function(t){var e={staticClass:"v-system-bar",class:this.classes,style:this.styles,on:this.$listeners};return t("div",this.setBackgroundColor(this.color,e),Object(V["s"])(this))}}),P=Object(o["a"])(n,a,s,!1,null,null,null);e["default"]=P.exports;u()(P,{VBtn:c["a"],VCard:d["a"],VCol:h["a"],VContainer:p["a"],VDivider:f["a"],VIcon:v["a"],VRow:m["a"],VSpacer:b["a"],VSystemBar:w})},c408:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-complex-card",{attrs:{complexField:t.field,slotProps:t.slotProps,label:t.label,errors:t.errors},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},s=[],r=i("fa57"),n={name:"fhir-identifier",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit","constraints"],data:function(){return{errors:[]}},components:{IhrisComplexCard:r["a"]}},o=n,l=i("2877"),u=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=u.exports},d55f:function(t,e,i){},e07f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.edit&&t.secondary?t._e():i("div",{staticClass:"ihris-section",attrs:{id:"section-"+t.name}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[i("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(t._s(t.title)+" ")]),i("v-card-text",{staticClass:"my-3"},[t._t("default",null,{source:t.slotProps.source})],2)],1)],1)},s=[],r={name:"ihris-section",props:["name","slotProps","title","description","edit","secondary"],data:function(){return{}},created:function(){},watch:{},methods:{}},n=r,o=i("2877"),l=i("6544"),u=i.n(l),c=i("b0af"),d=i("99d9"),h=Object(o["a"])(n,a,s,!1,null,null,null);e["default"]=h.exports;u()(h,{VCard:c["a"],VCardText:d["c"],VCardTitle:d["d"]})},eee9:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-select",{attrs:{loading:t.loading,label:t.display,items:t.items,outlined:"","hide-details":"auto","error-messages":t.errors,"item-text":"display","item-value":"code",disabled:t.disabled,rules:t.rules,dense:""},on:{change:function(e){t.errors=[]}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.display)+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.valueCode,callback:function(e){t.valueCode=e},expression:"valueCode"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.valueDisplay||t.value.display||"")+" ")]},proxy:!0}])})},s=[],r=(i("7db0"),i("b287")),n={name:"fhir-coding",props:["field","label","sliceName","targetprofile","min","max","base-min","base-max","slotProps","path","binding","edit","readOnlyIfSet","constraints"],components:{IhrisElement:r["a"]},data:function(){return{value:{system:"",code:"",display:""},valueCode:"",valueDisplay:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},disabled:!1,lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},valueCode:function(t){var e=this;if(this.items){var i=this.items.find((function(e){return e.code===t}));i&&(this.value=i)}this.value.system&&this.value.code&&this.$fhirutils.codeLookup(this.value.system,this.value.code,this.binding||this.source.binding).then((function(t){e.valueDisplay=t}))}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding||this.slotProps.source.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.source.data&&(this.value=this.source.data,this.valueCode=this.value.code,this.lockWatch=!0);else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),this.source.data[0]&&(this.value=this.source.data[0],this.valueCode=this.value.code,this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.valueCode}var i=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(i).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.errors=e.message,t.loading=!1}))}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]}}},o=n,l=i("2877"),u=i("6544"),c=i.n(u),d=i("b974"),h=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=h.exports;c()(h,{VSelect:d["a"]})},fa57:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("v-card-subtitle",{staticClass:"primary--text text-uppercase font-weight-bold"},[t._v(t._s(t.display))]),t._l(t.errors,(function(e,a){return i("v-card-text",{key:a,staticClass:"error white--text font-weight-bold"},[t._v(t._s(e))])})),i("v-card-text",[t._t("default",null,{source:t.source})],2)],2)},s=[],r={name:"ihris-complex-card",props:["complexField","slotProps","label","errors"],data:function(){return{source:{path:"",data:{}}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.complexField,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.complexField);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},n=r,o=i("2877"),l=i("6544"),u=i.n(l),c=i("b0af"),d=i("99d9"),h=Object(o["a"])(n,a,s,!1,null,null,null);e["a"]=h.exports;u()(h,{VCard:c["a"],VCardSubtitle:d["b"],VCardText:d["c"]})}}]);
//# sourceMappingURL=fhir-primary.dacb5e42.js.map