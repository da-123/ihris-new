(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fhir-questionnaire"],{"0bc6":function(t,e,i){},4983:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ihris-section",attrs:{id:"section-"+t.id}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[i("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(t._s(t.label))]),i("v-card-text",{staticClass:"my-3"},[t._t("default")],2)],1)],1)},r=[],n={name:"ihris-questionnaire-section",props:["id","label","description","path"],data:function(){return{isQuestionnaireGroup:!0}}},s=n,o=i("2877"),c=i("6544"),l=i.n(c),u=i("b0af"),d=i("99d9"),v=Object(o["a"])(s,a,r,!1,null,null,null);e["default"]=v.exports;l()(v,{VCard:u["a"],VCardText:d["c"],VCardTitle:d["d"]})},5105:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-none"},[i("v-text-field",{attrs:{readonly:"","hide-details":"",dense:"",disabled:""},model:{value:t.hiddenValue,callback:function(e){t.hiddenValue=e},expression:"hiddenValue"}})],1)},r=[],n={name:"ihris-hidden",props:["label","path","hiddenType","hiddenValue"],data:function(){return{qField:"value"+this.hiddenType,value:this.hiddenValue}}},s=n,o=i("2877"),c=i("6544"),l=i.n(c),u=i("8654"),d=Object(o["a"])(s,a,r,!1,null,null,null);e["default"]=d.exports;l()(d,{VTextField:u["a"]})},"8ce9":function(t,e,i){},"91dd":function(t,e,i){"use strict";function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,n){e=e||"&",i=i||"=";var s={};if("string"!==typeof t||0===t.length)return s;var o=/\+/g;t=t.split(e);var c=1e3;n&&"number"===typeof n.maxKeys&&(c=n.maxKeys);var l=t.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,v,p,h,f=t[u].replace(o,"%20"),m=f.indexOf(i);m>=0?(d=f.substr(0,m),v=f.substr(m+1)):(d=f,v=""),p=decodeURIComponent(d),h=decodeURIComponent(v),a(s,p)?r(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},b383:function(t,e,i){"use strict";e.decode=e.parse=i("91dd"),e.encode=e.stringify=i("e099")},ce7e:function(t,e,i){"use strict";var a=i("5530"),r=(i("8ce9"),i("7560"));e["a"]=r["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:Object(a["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(a["a"])({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})},e099:function(t,e,i){"use strict";var a=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,o){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"===typeof t?n(s(t),(function(s){var o=encodeURIComponent(a(s))+i;return r(t[s])?n(t[s],(function(t){return o+encodeURIComponent(a(t))})).join(e):o+encodeURIComponent(a(t[s]))})).join(e):o?encodeURIComponent(a(o))+i+encodeURIComponent(a(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function n(t,e){if(t.map)return t.map(e);for(var i=[],a=0;a<t.length;a++)i.push(e(t[a],a));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},e0c7:function(t,e,i){"use strict";var a=i("5530"),r=(i("0bc6"),i("7560")),n=i("58df");e["a"]=Object(n["a"])(r["a"]).extend({name:"v-subheader",props:{inset:Boolean},render:function(t){return t("div",{staticClass:"v-subheader",class:Object(a["a"])({"v-subheader--inset":this.inset},this.themeClasses),attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})},f43a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[i("v-card-title",{staticClass:"primary white--text text-uppercase font-weight-bold"},[t._v(t._s(t.label))]),i("v-card-text",{staticClass:"my-3"},[t._t("default")],2)],1)},r=[],n={name:"ihris-questionnaire-group",props:["label","path"],data:function(){return{isQuestionnaireGroup:!0}}},s=n,o=i("2877"),c=i("6544"),l=i.n(c),u=i("b0af"),d=i("99d9"),v=Object(o["a"])(s,a,r,!1,null,null,null);e["default"]=v.exports;l()(v,{VCard:u["a"],VCardText:d["c"],VCardTitle:d["d"]})},f977:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"my-3"},[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t._t("default"),i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{size:"50",color:"primary",indeterminate:""}}),i("v-btn",{attrs:{icon:""},on:{click:function(e){t.overlay=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",right:"",permanent:"",clipped:""}},[i("v-list",{staticClass:"white--text"},[i("v-list-item",[t.isEdit?i("v-btn",{staticClass:"accent darken-1",attrs:{dark:""},on:{click:function(e){return t.$router.go(-1)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v("Back")])],1):t._e(),i("v-spacer"),i("v-btn",{staticClass:"success darken-1",attrs:{dark:"",disabled:!t.valid},on:{click:function(e){return t.processFHIR()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v("Save")])],1)],1),i("v-list-item",[i("v-spacer"),t.edit?i("v-btn",{staticClass:"accent",attrs:{dark:""},on:{click:function(e){return t.$refs.form.validate()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-account-check")]),i("span",[t._v("Validate")])],1):t._e()],1),i("v-divider",{attrs:{color:"white"}}),t.sectionMenu?i("v-subheader",{staticClass:"white--text"},[i("h2",[t._v("Sections")])]):t._e(),t._l(t.sectionMenu,(function(e){return i("v-list-item",{key:e.id,attrs:{href:"#section-"+e.id}},[i("v-list-item-content",{staticClass:"white--text"},[i("v-list-item-title",{staticClass:"text-uppercase"},[i("h4",[t._v(t._s(e.title))])]),i("v-list-item-subtitle",{staticClass:"white--text"},[t._v(t._s(e.desc))])],1)],1)}))],2)],1)],2)],1)},r=[],n=(i("4160"),i("d3b7"),i("ac1f"),i("1276"),i("159b"),i("b383")),s={name:"ihris-questionnaire",props:["id","url","title","description","purpose","section-menu","view-page","edit"],data:function(){return{fhir:{},loading:!1,overlay:!1,isEdit:!1,valid:!0}},created:function(){},methods:{processFHIR:function(){var t=this;this.$refs.form.validate(),this.valid&&(this.overlay=!0,this.loading=!0,this.fhir={resourceType:"QuestionnaireResponse",questionnaire:this.url,status:"completed",item:[]},o(this.fhir.item,this.$children),console.log("SAVE",this.fhir),fetch("/fhir/QuestionnaireResponse?"+n.stringify(this.$route.query),{method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual",body:JSON.stringify(this.fhir)}).then((function(e){201===e.status&&(e.json().then((function(e){if(t.overlay=!1,t.loading=!1,t.viewPage&&e.subject&&e.subject.reference){var i=e.subject.reference.split("/");i=i[1]?i[1]:e.subject.reference,t.$router.push({name:"resource_view",params:{page:t.viewPage,id:i}})}else t.$router.push({name:"home"})})),t.$store.commit("setMessage",{type:"success",text:"Update successful."}))})).catch((function(e){console.log(e),t.overlay=!1,t.loading=!1,t.$store.commit("setMessage",{type:"error",text:"Failed to update data."})})))}}},o=function t(e,i,a){a||(a={}),i.forEach((function(i){var r=e,n={};if(i.isArray);else if(i.isQuestionnaireGroup){var s={linkId:i.path,text:i.label,item:[]};r.push(s),r=s.item}else if(i.qField){var o;a.hasOwnProperty(i.path)?o=a[i.path]:(o={linkId:i.path,answer:[]},a[i.path]=o,r.push(o));var c={};c[i.qField]=i.value,o.answer.push(c)}i.$children&&t(r,i.$children,n)}))},c=s,l=i("2877"),u=i("6544"),d=i.n(u),v=i("8336"),p=i("a523"),h=i("ce7e"),f=i("4bd4"),m=i("132d"),b=i("8860"),y=i("da13"),C=i("5d23"),x=i("f774"),g=i("a797"),_=i("490a"),w=i("2fa4"),V=i("e0c7"),j=Object(l["a"])(c,a,r,!1,null,null,null);e["default"]=j.exports;d()(j,{VBtn:v["a"],VContainer:p["a"],VDivider:h["a"],VForm:f["a"],VIcon:m["a"],VList:b["a"],VListItem:y["a"],VListItemContent:C["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"],VNavigationDrawer:x["a"],VOverlay:g["a"],VProgressCircular:_["a"],VSpacer:w["a"],VSubheader:V["a"]})}}]);
//# sourceMappingURL=fhir-questionnaire.6dc40c35.js.map