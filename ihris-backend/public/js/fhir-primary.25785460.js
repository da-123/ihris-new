(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fhir-primary","fhir-name"],{1131:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[a("v-select",{attrs:{loading:t.loading,label:t.display,items:t.items,outlined:"","hide-details":"auto","error-messages":t.errors,"item-text":"display","item-value":"code",disabled:t.disabled,rules:t.rules,dense:""},on:{change:function(e){t.errors=[]}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.display)+" "),t.required?a("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(a("7db0"),a("b287")),n={name:"fhir-code",props:["field","min","max","base-min","base-max","label","binding","slotProps","path","edit","sliceName","readOnlyIfSet","constraints"],components:{IhrisElement:r["a"]},data:function(){return{value:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},disabled:!1,lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}var a=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(a).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.errors.push(e.message),t.loading=!1}))}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},displayValue:function(){var t=this,e=this.items.find((function(e){return e.code===t.value}));return e?e.display:""},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]}}},o=n,l=a("2877"),u=a("6544"),c=a.n(u),d=a("b974"),h=Object(l["a"])(o,i,s,!1,null,null,null);e["default"]=h.exports;c()(h,{VSelect:d["a"]})},"1ff8":function(t,e,a){},"309c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default",null,{source:t.source})],2)},s=[],r={name:"fhir-codeable-concept",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","binding","edit","constraints"],data:function(){return{source:{path:"",data:{},binding:this.binding},errors:[]}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},n=r,o=a("2877"),l=Object(o["a"])(n,i,s,!1,null,null,null);e["default"]=l.exports},"39e1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.edit?t._e():a("v-container",{staticClass:"my-3"},[t.isLeaveStock?a("div",{staticClass:"leave-notification"},[a("span",{attrs:{id:"lv-notif-message"}})]):t._e(),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.columns,items:t.items,"item-key":"id","items-per-page":5,loading:t.loading,dense:""},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v(" "+t._s(t.title)+" ")]),a("v-spacer"),t._l(t.topActions,(function(e){return a("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,{}),color:e.class,small:""}},[t._v(" "+t._s(e.text)+" ")])}))],2)]},proxy:!0},{key:"item._action",fn:function(e){var i=e.item;return t._l(i.actions,(function(e){return a("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,i),color:e.class,small:"",rounded:""}},[t._v(" "+t._s(e.text)+" ")])}))}}],null,!1,3813068814)})],1)},s=[],r=(a("a623"),a("4de4"),a("7db0"),a("caad"),a("c975"),a("a15b"),a("baa5"),a("d81d"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("5319"),a("1276"),a("9911"),a("ddb0"),a("b85c")),n=(a("96cf"),a("1da1")),o=function(t){return!!t&&t.constructor===Object},l={name:"ihris-secondary",props:["title","field","profile","slotProps","link-id","link-field","search-field","edit","columns","actions"],data:function(){return{source:{data:{},path:this.field},empty:!0,items:[],loading:!0,topActions:[],isLeaveStock:!1}},mounted:function(){this.setupData()},created:function(){if(this.isLeaveStock=this.profile.includes("ihris-basic-ethiopia-leave-stock"),this.profile.includes("http://ihris.org/fhir/StructureDefinition/ihris-job-description")){var t=this.linkField.replace(".","_").substring(this.linkField.lastIndexOf(".")),e="/fhir/"+this.field+"?"+t+"="+this.linkId;fetch(e).then((function(t){200===t.status&&(console.log("JE FAIS UN PAS ICI!!!"),t.json().then((function(t){if(console.log("JE FAIS UN DEUXIEME PAS ICI!!!"),t.entry){console.log("PUIS UN TROISIEME PAS ICI!!!");var e=t.entry[0].resource.extension,a=e.find((function(t){return"http://ihris.org/fhir/StructureDefinition/ihris-practitionerrole-first-employment-date"===t.url})).valueDate,i=(new Date).getFullYear(),s=new Date(a).getFullYear();console.log("JE SUIS MAINTENANT ICI!!!");var r="<p>You have "+(i-s)+" monthly leave days.</p>";document.getElementById("lv-notif-message").appendChild(r)}})))}))}},methods:{setupData:function(){var t;if(2===this.searchField.split(":").length){var e=this.searchField.split(":")[0];t="fhir/"+e+"?_id="+this.linkId+"&_include="+this.searchField}else{t="/fhir/"+this.field;var a=[];this.profile&&a.push("_profile="+this.profile),this.searchField?a.push(this.searchField+"="+this.linkId):a.push(this.linkField.substring(this.linkField.indexOf(".")+1)+"="+this.linkId),t+="?"+a.join("&")}this.items=[],this.loading=!0,this.addItems(t)},addItems:function(t){var e=this;fetch(t).then((function(a){200===a.status?a.json().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i,s,n,o,l,u,c,d,h,p,f,v,m,b,y,x,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(a.entry&&a.entry.length>0)){t.next=52;break}i=Object(r["a"])(a.entry),t.prev=2,i.s();case 4:if((s=i.n()).done){t.next=42;break}if(n=s.value,2!==e.searchField.split(":").length||n.resource.resourceType!==e.searchField.split(":")[0]){t.next=8;break}return t.abrupt("continue",40);case 8:o={id:n.resource.id},l=Object(r["a"])(e.columns),t.prev=10,l.s();case 12:if((u=l.n()).done){t.next=28;break}if(c=u.value,"_action"!==c.value){t.next=16;break}return t.abrupt("continue",26);case 16:return t.prev=16,d=e.$fhirpath.evaluate(n.resource,c.value),t.next=20,e.processContent(d);case 20:o[c.value]=t.sent,t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](16),console.log(t.t0);case 26:t.next=12;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t["catch"](10),l.e(t.t1);case 33:return t.prev=33,l.f(),t.finish(33);case 36:o.actions||(o.actions=[]),h=Object(r["a"])(e.actions);try{for(h.s();!(p=h.n()).done;)f=p.value,f.row?f.condition?(v=e.$fhirpath.evaluate(n.resource,f.condition),v.every((function(t){return t}))&&o.actions.push(f)):o.actions.push(f):f.condition?(m=e.$fhirpath.evaluate(n.resource,f.condition),f.hasOwnProperty("meets")?f.meets=f.meets&&m.every((function(t){return t})):f.meets=m.every((function(t){return t}))):f.meets=!0}catch(k){h.e(k)}finally{h.f()}e.items.push(o);case 40:t.next=4;break;case 42:t.next=47;break;case 44:t.prev=44,t.t2=t["catch"](2),i.e(t.t2);case 47:return t.prev=47,i.f(),t.finish(47);case 50:t.next=54;break;case 52:b=Object(r["a"])(e.actions);try{for(b.s();!(y=b.n()).done;)x=y.value,x.row||(x.meets=x.emptyDisplay)}catch(k){b.e(k)}finally{b.f()}case 54:e.topActions=e.actions.filter((function(t){return!t.row&&t.meets})),a.link?(g=a.link.find((function(t){return"next"===t.relation})),g?e.addItems(g.url):e.loading=!1):e.loading=!1;case 56:case"end":return t.stop()}}),t,null,[[2,44,47,50],[10,30,33,36],[16,23]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,console.log(t)})):(e.loading=!1,console.log("Unable to fetch",t,a.status))})).catch((function(t){e.loading=!1,console.log(t)}))},processContent:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(e)){t.next=7;break}return t.next=3,Promise.all(e.map(this.processContent));case 3:return a=t.sent,t.abrupt("return",a.join(" "));case 7:if(!o(e)){t.next=32;break}if(!e.code||!e.system){t.next=14;break}return t.next=11,this.$fhirutils.codeLookup(e.system,e.code);case 11:return t.abrupt("return",t.sent);case 14:if(!e.display){t.next=18;break}return t.abrupt("return",e.display);case 18:if(!e.code){t.next=22;break}return t.abrupt("return",e.code);case 22:if(!e.reference){t.next=28;break}return t.next=25,this.$fhirutils.resourceLookup(e.reference);case 25:return t.abrupt("return",t.sent);case 28:return console.log("Unable to process content:",e),t.abrupt("return","Unknown");case 30:t.next=33;break;case 32:return t.abrupt("return",e);case 33:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setupLink:function(t,e){return t.replace("ITEMID",e.id).replace("FHIRID",this.linkId)}}},u=l,c=(a("553c"),a("2877")),d=a("6544"),h=a.n(d),p=a("8336"),f=a("a523"),v=a("8fea"),m=a("2fa4"),b=a("71d9"),y=a("2a7f"),x=Object(c["a"])(u,i,s,!1,null,"740dbb86",null);e["default"]=x.exports;h()(x,{VBtn:p["a"],VContainer:f["a"],VDataTable:v["a"],VSpacer:m["a"],VToolbar:b["a"],VToolbarTitle:y["a"]})},"45dd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-text-field",t._g({attrs:{label:t.label,"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",rules:t.rules,"error-messages":t.errors,dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.label)+" "),t.required?a("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}],null,!0),model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}},i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t.isEthiopian?a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-title",{staticClass:"primary white--text"},[t._v(" Ethiopian Calendar"),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!t.showGregorian}}},[t.showGregorian?a("v-icon",[t._v("mdi-calendar")]):a("v-icon",[t._v("mdi-calendar-multiple")])],1)],1),"year"===t.pickerType?a("v-card-text",[a("br"),a("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1):a("v-ethiopian-date-picker",{ref:"etPicker",attrs:{label:"Ethiopian",color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.maxValueETDateTime,min:t.minValueETDateTime,type:t.pickerType,disabled:t.disabled,locale:"am"},on:{change:t.save},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1),t.showGregorian?a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-title",{staticClass:"primary white--text"},[t._v(" Gregorian Calendar"),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),"year"===t.pickerType?a("v-card-text",[a("br"),a("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):a("v-date-picker",{ref:"gPicker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e()],1)],1):"year"===t.pickerType?a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-text",[a("br"),a("v-text-field",{attrs:{type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1):a("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.label)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(a("d81d"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("466d"),a("4d90"),a("1276"),a("3835")),n=a("b287"),o=a("c472"),l=a("08e0"),u=a.n(l),c={name:"fhir-date-time",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDateTime","maxValueDateTime","minValueQuantity","maxValueQuantity","displayType","readOnlyIfSet","calendar","constraints"],components:{IhrisElement:n["a"],VEthiopianDatePicker:o["a"]},data:function(){return{value:null,etValue:null,menu:!1,source:{path:"",data:{}},qField:"valueDateTime",pickerType:"date",disabled:!1,showGregorian:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},computed:{dateValueMax:function(){if(this.maxValueQuantity){var t=this.convertQuantity(this.maxValueQuantity,"add");if(t)return t}if(this.maxValueDate)return this.maxValueDate},dateValueMin:function(){if(this.minValueQuantity){var t=this.convertQuantity(this.minValueQuantity,"subtract");if(t)return t}else if(this.minValueDate)return this.minValueDate},minYear:function(){return this.dateValueMin?this.dateValueMin.substring(0,4):void 0},maxYear:function(){return this.dateValueMax?this.dateValueMax.substring(0,4):void 0},minYearET:function(){return this.minValueETDate?this.minValueETDate.substring(0,4):void 0},maxYearET:function(){return this.maxValueETDate?this.maxValueETDate.substring(0,4):void 0},isEthiopian:function(){return"Ethiopian"===this.calendar},minValueETDateTime:function(){return this.dateValueMin?this.convertGE(this.dateValueMin):null},maxValueETDateTime:function(){return this.dateValueMax?this.convertGE(this.dateValueMax):null},displayValue:function(){return this.isEthiopian?this.value&&"Ethiopian: "+this.etValue+" Gregorian: "+this.value:this.value},index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.label+" is required"}]:[]}},watch:{menu:function(t){var e=this;this.isEthiopian?!this.value&&t&&setTimeout((function(){return e.$refs.etPicker.activePicker="YEAR"})):!this.value&&t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"}))},showGregorian:function(t){var e=this;!this.value&&t&&setTimeout((function(){return e.$refs.gPicker.activePicker="YEAR"}))},slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},value:function(t){t?"year"===this.pickerType?4===t.length&&(this.etValue=this.convertGE(t)):this.etValue=this.convertGE(t):this.etValue=t},etValue:function(t){t?"year"===this.pickerType?4===t.length&&(this.value=this.convertEG(t)):this.value=this.convertEG(t):this.value=t}},methods:{convertQuantity:function(t,e){var a={a:"years",mo:"months",wk:"weeks",d:"days"},i=/(-?\d+)([a-z]{1,3})/,s=t.match(i);if(3===s.length)try{var r=s[1],n=a[s[2]];return"subtract"===e?this.$moment(this.$moment().subtract(r,n)).format("YYYY-MM-DD"):this.$moment(this.$moment().add(r,n)).format("YYYY-MM-DD")}catch(o){console.log("Failed to get date from quantity",o)}},convertGE:function(t){if(!t)return t;var e=t.split("-").map(Number),a=Object(r["a"])(e,3),i=a[0],s=a[1],n=a[2];if("year"===this.pickerType){var o=u.a.ge(i,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=u.a.ge(i,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},convertEG:function(t){if(!t)return t;var e=t.split("-").map(Number),a=Object(r["a"])(e,3),i=a[0],s=a[1],n=a[2];if("year"===this.pickerType){var o=u.a.eg(i,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=u.a.eg(i,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}},save:function(t){this.errors=[],this.$refs.menu.save(t)}}},d=c,h=a("2877"),p=a("6544"),f=a.n(p),v=a("8336"),m=a("b0af"),b=a("99d9"),y=a("a523"),x=a("2e4b"),g=a("132d"),k=a("e449"),V=a("0fd9"),_=a("2fa4"),P=a("8654"),w=Object(h["a"])(d,i,s,!1,null,null,null);e["default"]=w.exports;f()(w,{VBtn:v["a"],VCard:m["a"],VCardText:b["c"],VCardTitle:b["d"],VContainer:y["a"],VDatePicker:x["a"],VIcon:g["a"],VMenu:k["a"],VRow:V["a"],VSpacer:_["a"],VTextField:P["a"]})},"553c":function(t,e,a){"use strict";var i=a("87c4"),s=a.n(i);s.a},"6b10":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default",null,{source:t.source})],2)},s=[],r=(a("ac1f"),a("5319"),{name:"fhir-extension",props:["field","sliceName","min","max","base-min","base-max","profile","slotProps","path","edit","constraints"],data:function(){return{source:{path:"",data:[]},errors:[]}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t;t=this.profile?this.profile:this.sliceName;var e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+t+"')");this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e)}}}}),n=r,o=a("2877"),l=Object(o["a"])(n,i,s,!1,null,null,null);e["default"]=l.exports},"6dbd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return""!==t.intro.fullname?a("div",{class:["ihris-intro-container",t.hasScrolled||this.isQuestionnaire?"show":"hide"]},[a("v-img",{staticClass:"photo",attrs:{src:t.photoURL,contain:"","max-height":150,position:"left"}}),a("div",{staticClass:"ihris-intro"},[a("span",[t._v("Employee ID : "+t._s(t.intro.employeeID))]),a("span",[t._v("Full name : "+t._s(t.intro.fullname))]),a("span",[t._v("Date of Birth : "+t._s(t.intro.birthDate))]),a("span",[t._v("Gender : "+t._s(t.intro.gender))])])],1):t._e()},s=[],r=(a("4de4"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),{name:"ihris-practitioner-intro",props:["slotProps","isQuestionnaire"],data:function(){return{intro:{display:"Health Worker",fullname:"",photoURL:"",birthDate:"",gender:"",employeeID:""},hasScrolled:!1}},components:{},mounted:function(){this.isQuestionnaire?window.removeEventListener("scroll",this.handleScroll):window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){var e=this.slotProps.source.data,a=e.name?e.name[0].given[0]:"";this.intro.gender=e.gender,this.intro.birthDate=e.birthDate,this.intro.employeeID=e.identifier?e.identifier[0].value:"";var i=e.extension?e.extension[0]:null;i=i?i.extension:[];var s=i.filter((function(t){return"fathers"===t.url})),r=i.filter((function(t){return"grandfatherslastname"===t.url})),n="";if(e.photo&&(n=e.photo[0]),this.intro.fullname=a+" "+(s.length>0)?s[0].valueString:r[0].valueString,n.data&&n.contentType){var o="data:"+n.contentType+";base64,"+n.data;fetch(o).then((function(t){return t.blob()})).then((function(e){t.photoURL=URL.createObjectURL(e)})).catch((function(t){console.log("Failed to get data from base64.",t)}))}}},handleScroll:function(t){console.log(window.top.scrollY),this.hasScrolled=window.top.scrollY>=100,console.log(t)},toggleContent:function(){this.showMore=!this.showMore}}}),n=r,o=(a("7225"),a("2877")),l=a("6544"),u=a.n(l),c=a("adda"),d=Object(o["a"])(n,i,s,!1,null,"d29f0594",null);e["default"]=d.exports;u()(d,{VImg:c["a"]})},7225:function(t,e,a){"use strict";var i=a("1ff8"),s=a.n(i);s.a},7372:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"my-3"},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t._t("default",null,{source:t.source}),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{size:"50",color:"primary",indeterminate:""}})],1),a("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",right:"",permanent:"",clipped:""}},[a("v-list",{staticClass:"white--text"},[a("v-list-item",[t.edit?a("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.go(0)}}},[a("v-icon",{attrs:{light:""}},[t._v("mdi-pencil-off")]),a("span",[t._v("Cancel")])],1):a("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$emit("set-edit",!t.edit)}}},[a("v-icon",{attrs:{light:""}},[t._v("mdi-pencil")]),a("span",[t._v("Edit")])],1),a("v-spacer"),t.edit?[t.valid?a("v-btn",{staticClass:"success darken-1",attrs:{dark:"",disabled:!t.valid},on:{click:function(e){return t.processFHIR()}}},[a("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),a("span",[t._v("Save")])],1):a("v-btn",{staticClass:"warning",attrs:{dark:""},on:{click:function(e){return t.$refs.form.validate()}}},[a("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),a("span",[t._v("Save")])],1)]:t._e()],2),a("v-divider",{attrs:{color:"white"}}),!t.edit&&t.links&&t.links.length?t._l(t.links,(function(e,i){return a("v-list-item",{key:e.url},[a("v-btn",{key:e.url,staticClass:"primary",attrs:{text:!e.button,to:t.getLinkUrl(e)}},[e.icon?a("v-icon",{attrs:{light:""}},[t._v(t._s(e.icon))]):t._e(),t._v(" "+t._s(t.linktext[i])+" ")],1)],1)})):t._e(),t.sectionMenu?a("v-subheader",{staticClass:"white--text"},[a("h2",[t._v("Sections")])]):t._e(),t._l(t.sectionMenu,(function(e){return a("v-list-item",{key:e.name,class:"#section-"+e.name===t.path?"highlighted":"",attrs:{href:"#section-"+e.name}},[t.edit&&e.secondary?t._e():a("v-list-item-content",{staticClass:"white--text"},[a("v-list-item-title",{staticClass:"text-uppercase"},[a("h4",[t._v(t._s(e.title))])]),a("v-list-item-subtitle",{staticClass:"white--text"},[t._v(t._s(e.desc))])],1)],1)}))],2)],1)],2)],1)},s=[],r=(a("caad"),a("fb6a"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("5319"),a("1276"),a("2ca0"),a("96cf"),a("1da1")),n=a("b85c"),o={name:"ihris-resource",props:["title","field","fhir-id","page","profile","section-menu","edit","links","constraints"],data:function(){return{fhir:{},orig:{},valid:!0,source:{data:{},path:""},loading:!1,overlay:!1,isEdit:!1,linktext:[],advancedValid:!0,path:""}},created:function(){var t=this;if(this.fhirId)this.loading=!0,fetch("/fhir/"+this.field+"/"+this.fhirId).then((function(e){e.json().then((function(e){t.orig=e,t.source={data:e,path:t.field},t.setLinkText(),t.loading=!1})).catch((function(e){console.log(t.field,t.fhirId,e)}))})).catch((function(e){console.log(t.field,t.fhirId,e)}));else if(this.$route.query){for(var e={resourceType:this.field},a=!1,i=0,s=Object.keys(this.$route.query);i<s.length;i++){var r=s[i];if(r.startsWith(this.field+".")){a=!0;var o,l=r.substring(this.field.length+1).split("."),u=l.pop(),c=e,d=Object(n["a"])(l);try{for(d.s();!(o=d.n()).done;){var h=o.value;if(h.includes("["))try{var p=h.split("["),f=p[0],v=p[1].slice(0,-1);if(c.hasOwnProperty(f)||(c[f]=[]),v){var m={};c[f][parseInt(v)]=m,c=m}else{var b={};c[f].push(b),c=b}}catch(k){console.log("Unable to process",r);continue}else c.hasOwnProperty(h)||(c[h]={},c=c[h])}}catch(k){d.e(k)}finally{d.f()}if(u.includes("["))try{var y=u.split("["),x=y[0],g=y[1].slice(0,-1);c.hasOwnProperty(x)||(c[x]=[]),g?c[x][parseInt(g)]=this.$route.query[r]:c[x].push(this.$route.query[r])}catch(k){console.log("Unable to process",r);continue}else c[u]=this.$route.query[r]}}a&&(this.source={data:e,path:this.field})}},watch:{$route:function(t,e){console.log(t,e),console.log("HASH ",this.$route.hash),this.path=this.$route.hash}},computed:{hasFhirId:function(){return""!=this.fhirId&&!!this.fhirId}},methods:{getLinkField:function(t){var e=this.$fhirpath.evaluate(this.source.data,t);return!!e&&e[0]},getLinkUrl:function(t){var e;if(t.field&&(e=this.getLinkField(t.field)),e){if(e.includes("/")){var a=e.split("/");e=a[1]}return t.url.replace("FIELD",e)}return t.url},setLinkText:function(){var t=this,e=function(e){var a=t.links[e];if(a.text)t.linktext[e]=a.text;else if(a.field){var i=t.getLinkField(a.field);i&&t.$fhirutils.lookup(i).then((function(a){t.$set(t.linktext,e,a)}))}};for(var a in this.links)e(a)},processFHIR:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$refs.form.validate(),this.valid){t.next=3;break}return t.abrupt("return");case 3:return this.advancedValid=!0,this.overlay=!0,this.loading=!0,e=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a,i,r){var o,l,u,c,d,h,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=Object(n["a"])(r),t.prev=1,o.s();case 3:if((l=o.n()).done){t.next=36;break}if(u=l.value,c=a,d=i,u.field&&!u.fieldType&&(h=void 0,u.sliceName?u.field.startsWith("value[x]")?(h=u.field.substring(9),c+="."+h):(h=u.field.replace(":"+u.sliceName,""),c+="."+h):(h=u.field,c+="."+h),"1"!==u.max||"1"!==u.baseMax?i.hasOwnProperty(h)||(d[h]=[]):d[h]={},u.hasOwnProperty("value")?(Array.isArray(d[h])?d[h].push(u.value):d[h]=u.value,d=d[h]):Array.isArray(d[h])?(p={},u.profile?p.url=u.profile:"extension"===h&&u.sliceName&&(p.url=u.sliceName),d[h].push(p),d=p):d=d[h]),!u.$children){t.next=18;break}return t.prev=9,t.next=12,e(c,d,u.$children);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](9),s.advancedValid=!1,console.log(t.t0);case 18:if(!u.constraints){t.next=34;break}if(u.errors=[],t.prev=20,t.t1=s.advancedValid,!t.t1){t.next=26;break}return t.next=25,s.$fhirutils.checkConstraints(u.constraints,s.constraints,d,u.errors,s.fhirId);case 25:t.t1=t.sent;case 26:s.advancedValid=t.t1,t.next=34;break;case 29:t.prev=29,t.t2=t["catch"](20),s.advancedValid=!1,u.errors.push("An unknown error occurred."),console.log(t.t2);case 34:t.next=3;break;case 36:t.next=41;break;case 38:t.prev=38,t.t3=t["catch"](1),o.e(t.t3);case 41:return t.prev=41,o.f(),t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[1,38,41,44],[9,14],[20,29]])})));return function(e,a,i){return t.apply(this,arguments)}}(),this.fhir={resourceType:this.field,meta:{profile:[this.profile]}},t.prev=8,t.next=11,e(this.field,this.fhir,this.$children);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](8),this.advancedValid=!1,console.log(t.t0);case 17:if(this.advancedValid){t.next=22;break}return this.overlay=!1,this.loading=!1,this.$store.commit("setMessage",{type:"error",text:"There were errors on the form."}),t.abrupt("return");case 22:console.log("FINISHED PROCESS AND CHECK."),a="/fhir/"+this.field,i={method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual"},this.fhirId&&(this.fhir.id=this.fhirId,a+="/"+this.fhirId,i.method="PUT"),i.body=JSON.stringify(this.fhir),console.log("SAVE",a,this.fhir),fetch(a,i).then((function(t){201!==t.status&&200!==t.status||t.json().then((function(t){s.overlay=!1,s.loading=!1,s.fhirId?(s.$store.commit("setMessage",{type:"success",text:"Update successful."}),setTimeout((function(){return s.$router.go(0)}),2e3)):s.$router.push({name:"resource_view",params:{page:s.page,id:t.id}})}))}));case 29:case"end":return t.stop()}}),t,this,[[8,13]])})));function e(){return t.apply(this,arguments)}return e}()}},l=o,u=(a("7f06"),a("2877")),c=a("6544"),d=a.n(c),h=a("8336"),p=a("a523"),f=a("ce7e"),v=a("4bd4"),m=a("132d"),b=a("8860"),y=a("da13"),x=a("5d23"),g=a("f774"),k=a("a797"),V=a("490a"),_=a("2fa4"),P=a("e0c7"),w=Object(u["a"])(l,i,s,!1,null,null,null);e["default"]=w.exports;d()(w,{VBtn:h["a"],VContainer:p["a"],VDivider:f["a"],VForm:v["a"],VIcon:m["a"],VList:b["a"],VListItem:y["a"],VListItemContent:x["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VNavigationDrawer:g["a"],VOverlay:k["a"],VProgressCircular:V["a"],VSpacer:_["a"],VSubheader:P["a"]})},"7f06":function(t,e,a){"use strict";var i=a("9090"),s=a.n(i);s.a},"7fb0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-text-field",t._g({attrs:{label:t.label,"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",rules:t.rules,"error-messages":t.errors,dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.label)+" "),t.required?a("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}],null,!0),model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}},i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t.isEthiopian?a("v-container",{staticClass:"ma-0 pa-0"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-title",{staticClass:"primary white--text"},[t._v(" Ethiopian Calendar"),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!t.showGregorian}}},[t.showGregorian?a("v-icon",[t._v("mdi-calendar")]):a("v-icon",[t._v("mdi-calendar-multiple")])],1)],1),"year"===t.pickerType?a("v-card-text",[a("br"),a("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYearET,max:t.maxYearET,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1):a("v-ethiopian-date-picker",{ref:"etPicker",attrs:{label:"Ethiopian",color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.maxValueETDate,min:t.minValueETDate,type:t.pickerType,disabled:t.disabled,locale:"am"},on:{change:t.save},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1),t.showGregorian?a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-title",{staticClass:"primary white--text"},[t._v(" Gregorian Calendar"),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),"year"===t.pickerType?a("v-card-text",[a("br"),a("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):a("v-date-picker",{ref:"gPicker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e()],1)],1):"year"===t.pickerType?a("v-card",{attrs:{"min-width":"300px"}},[a("v-card-text",[a("br"),a("v-text-field",{attrs:{type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1):a("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.label)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(a("d81d"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("466d"),a("4d90"),a("1276"),a("3835")),n=a("b287"),o=a("c472"),l=a("08e0"),u=a.n(l),c={name:"fhir-date",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDate","maxValueDate","minValueQuantity","maxValueQuantity","displayType","readOnlyIfSet","calendar","constraints"],components:{IhrisElement:n["a"],VEthiopianDatePicker:o["a"]},data:function(){return{value:null,etValue:null,menu:!1,source:{path:"",data:{}},qField:"valueDate",pickerType:"date",disabled:!1,showGregorian:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},computed:{dateValueMax:function(){if(this.maxValueQuantity){var t=this.convertQuantity(this.maxValueQuantity,"add");if(t)return t}if(this.maxValueDate)return this.maxValueDate},dateValueMin:function(){if(this.minValueQuantity){var t=this.convertQuantity(this.minValueQuantity,"subtract");if(t)return t}else if(this.minValueDate)return this.minValueDate},minYear:function(){return this.dateValueMin?this.dateValueMin.substring(0,4):void 0},maxYear:function(){return this.dateValueMax?this.dateValueMax.substring(0,4):void 0},minYearET:function(){return this.minValueETDate?this.minValueETDate.substring(0,4):void 0},maxYearET:function(){return this.maxValueETDate?this.maxValueETDate.substring(0,4):void 0},isEthiopian:function(){return"Ethiopian"===this.calendar},minValueETDate:function(){return this.dateValueMin?this.convertGE(this.dateValueMin):null},maxValueETDate:function(){return this.dateValueMax?this.convertGE(this.dateValueMax):null},displayValue:function(){return this.isEthiopian?this.value&&"Ethiopian: "+this.etValue+" Gregorian: "+this.value:this.value},index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.label+" is required"}]:[]}},watch:{menu:function(t){var e=this;"year"!==this.pickerType&&(this.isEthiopian?!this.value&&t&&setTimeout((function(){return e.$refs.etPicker.activePicker="YEAR"})):!this.value&&t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"})))},showGregorian:function(t){var e=this;!this.value&&t&&setTimeout((function(){return e.$refs.gPicker.activePicker="YEAR"}))},slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},value:function(t){t?"year"===this.pickerType?4===t.length&&(this.etValue=this.convertGE(t)):this.etValue=this.convertGE(t):this.etValue=t},etValue:function(t){t?"year"===this.pickerType?4===t.length&&(this.value=this.convertEG(t)):this.value=this.convertEG(t):this.value=t}},methods:{convertQuantity:function(t,e){var a={a:"years",mo:"months",wk:"weeks",d:"days"},i=/(-?\d+)([a-z]{1,3})/,s=t.match(i);if(3===s.length)try{var r=s[1],n=a[s[2]];return"subtract"===e?this.$moment(this.$moment().subtract(r,n)).format("YYYY-MM-DD"):this.$moment(this.$moment().add(r,n)).format("YYYY-MM-DD")}catch(o){console.log("Failed to get date from quantity",o)}},convertGE:function(t){if(!t)return t;var e=t.split("-").map(Number),a=Object(r["a"])(e,3),i=a[0],s=a[1],n=a[2];if("year"===this.pickerType){var o=u.a.ge(i,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=u.a.ge(i,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},convertEG:function(t){if(!t)return t;var e=t.split("-").map(Number),a=Object(r["a"])(e,3),i=a[0],s=a[1],n=a[2];if("year"===this.pickerType){var o=u.a.eg(i,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=u.a.eg(i,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}},save:function(t){this.errors=[],this.$refs.menu.save(t)}}},d=c,h=a("2877"),p=a("6544"),f=a.n(p),v=a("8336"),m=a("b0af"),b=a("99d9"),y=a("a523"),x=a("2e4b"),g=a("132d"),k=a("e449"),V=a("0fd9"),_=a("2fa4"),P=a("8654"),w=Object(h["a"])(d,i,s,!1,null,null,null);e["default"]=w.exports;f()(w,{VBtn:v["a"],VCard:m["a"],VCardText:b["c"],VCardTitle:b["d"],VContainer:y["a"],VDatePicker:x["a"],VIcon:g["a"],VMenu:k["a"],VRow:V["a"],VSpacer:_["a"],VTextField:P["a"]})},8308:function(t,e,a){},"87c4":function(t,e,a){},"89c1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ihris-complex-card",{attrs:{complexField:t.field,slotProps:t.slotProps,label:t.label,errors:t.errors},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},s=[],r=a("fa57"),n={name:"fhir-human-name",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit","constraints"],data:function(){return{errors:[]}},components:{IhrisComplexCard:r["a"]}},o=n,l=a("2877"),u=Object(l["a"])(o,i,s,!1,null,null,null);e["default"]=u.exports},9090:function(t,e,a){},b287:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.edit?a("v-container",[t._t("form")],2):a("div",[a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._t("header")],2),t.loading?a("v-col",{attrs:{cols:t.$store.state.cols.content}},[a("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}})],1):a("v-col",{attrs:{cols:t.$store.state.cols.content}},[t._t("value")],2)],1),a("v-divider")],1)],1)},s=[],r={name:"ihris-element",props:["edit","loading"]},n=r,o=a("2877"),l=a("6544"),u=a.n(l),c=a("62ad"),d=a("a523"),h=a("ce7e"),p=a("8e36"),f=a("0fd9"),v=Object(o["a"])(n,i,s,!1,null,null,null);e["a"]=v.exports;u()(v,{VCol:c["a"],VContainer:d["a"],VDivider:h["a"],VProgressLinear:p["a"],VRow:f["a"]})},b78c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[a("v-text-field",{attrs:{"error-messages":t.errors,disabled:t.disabled,label:t.display,outlined:"","hide-details":"auto",rules:t.rules,type:t.isPassword?t.showPassword?"text":"password":"text","append-icon":t.isPassword?t.showPassword?"mdi-eye":"mdi-eye-off":"",dense:""},on:{change:function(e){t.errors=[]},"click:append":function(e){t.showPassword=!t.showPassword}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.display)),t.required?a("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.value)+" ")]},proxy:!0}])})},s=[],r=a("b287"),n={name:"fhir-string",props:["field","label","min","max","id","path","slotProps","sliceName","base-min","base-max","edit","readOnlyIfSet","constraints","displayType"],components:{IhrisElement:r["a"]},data:function(){return{source:{path:"",data:{}},value:"",showPassword:!1,qField:"valueString",disabled:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]},isPassword:function(){return"password"===this.displayType}}},o=n,l=a("2877"),u=a("6544"),c=a.n(u),d=a("8654"),h=Object(l["a"])(o,i,s,!1,null,null,null);e["default"]=h.exports;c()(h,{VTextField:d["a"]})},bb1d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.simpleDisplay?a("div",[a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._v(t._s(t.label))]),a("v-col",{attrs:{cols:t.$store.state.cols.header}},[t._v(t._s(t.simpleValue))])],1),a("v-divider")],1):a("v-container",[a("v-card",[t.edit?a("v-system-bar",{attrs:{color:"secondary",dark:""}},[t._v(" "+t._s(t.label)+" "),a("v-spacer"),t.subAvailable?a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.removeRow()}}},[a("v-icon",{staticClass:"font-weight-bold"},[t._v("mdi-minus")])],1):t._e(),t.addAvailable?a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.addRow()}}},[a("v-icon",[t._v("mdi-plus")])],1):t._e()],1):t._e(),t._l(t.inputs,(function(e){return t._t("default",null,{input:e,source:e.source})}))],2)],1)],1)},s=[],r=(a("caad"),a("a15b"),a("a434"),a("ac1f"),a("5319"),{name:"ihris-array",props:["label","min","max","id","path","slotProps","field","fieldType","profile","targetProfile","sliceName","edit"],data:function(){return{inputs:[],source:{path:"",data:[]},isArray:!0,lockWatch:!1}},created:function(){this.setupInputs()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupInputs()},deep:!0}},methods:{setupInputs:function(){this.inputs=[],this.source={path:this.path,data:{}};var t=this.path;if(this.slotProps&&this.slotProps.source){var e=this.field;this.sliceName&&(e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+this.profile+"')")),this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),this.source.data.length>0&&(this.lockWatch=!0)}for(var a=0;a<this.actualMin;a++){var i=this.label;this.displayIndex&&(i+=" ("+(a+1)+")");var s={label:i,index:a,data:void 0};this.source.data[a]&&(s.source={data:this.source.data[a],path:t+"["+a+"]",fromArray:!0}),this.inputs.push(s)}},addRow:function(){if(this.lockWatch=!0,this.addAvailable){var t=this.label;this.displayIndex&&(t+=" ("+(this.inputs.length+1)+")"),this.inputs.push({label:t,index:this.inputs.length})}},removeRow:function(){this.subAvailable&&this.inputs.splice(-1)},getField:function(){return this.field}},computed:{actualMin:function(){return Math.max(this.min,this.source.data.length>0?this.source.data.length:0)},addAvailable:function(){return"*"===this.max||this.inputs.length<this.max},displayIndex:function(){return"*"===this.max||this.max>1},subAvailable:function(){return this.actualMin<this.inputs.length},simpleDisplay:function(){return!this.edit&&["string"].includes(this.fieldType)},simpleValue:function(){return this.source.data.join(" ")}}}),n=r,o=a("2877"),l=a("6544"),u=a.n(l),c=a("8336"),d=a("b0af"),h=a("62ad"),p=a("a523"),f=a("ce7e"),v=a("132d"),m=a("0fd9"),b=a("2fa4"),y=(a("a9e3"),a("c7cd"),a("5530")),x=(a("8308"),a("3a66")),g=a("a9ad"),k=a("7560"),V=a("58df"),_=a("80d2"),P=Object(V["a"])(Object(x["a"])("bar",["height","window"]),g["a"],k["a"]).extend({name:"v-system-bar",props:{height:[Number,String],lightsOut:Boolean,window:Boolean},computed:{classes:function(){return Object(y["a"])({"v-system-bar--lights-out":this.lightsOut,"v-system-bar--absolute":this.absolute,"v-system-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-system-bar--window":this.window},this.themeClasses)},computedHeight:function(){return this.height?isNaN(parseInt(this.height))?this.height:parseInt(this.height):this.window?32:24},styles:function(){return{height:Object(_["h"])(this.computedHeight)}}},methods:{updateApplication:function(){return this.$el?this.$el.clientHeight:this.computedHeight}},render:function(t){var e={staticClass:"v-system-bar",class:this.classes,style:this.styles,on:this.$listeners};return t("div",this.setBackgroundColor(this.color,e),Object(_["s"])(this))}}),w=Object(o["a"])(n,i,s,!1,null,null,null);e["default"]=w.exports;u()(w,{VBtn:c["a"],VCard:d["a"],VCol:h["a"],VContainer:p["a"],VDivider:f["a"],VIcon:v["a"],VRow:m["a"],VSpacer:b["a"],VSystemBar:P})},c408:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ihris-complex-card",{attrs:{complexField:t.field,slotProps:t.slotProps,label:t.label,errors:t.errors},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},s=[],r=a("fa57"),n={name:"fhir-identifier",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit","constraints"],data:function(){return{errors:[]}},components:{IhrisComplexCard:r["a"]}},o=n,l=a("2877"),u=Object(l["a"])(o,i,s,!1,null,null,null);e["default"]=u.exports},e07f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.edit&&t.secondary?t._e():a("div",{staticClass:"ihris-section",attrs:{id:"section-"+t.name}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[a("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(t._s(t.title)+" ")]),a("v-card-text",{staticClass:"my-3"},[t._t("default",null,{source:t.slotProps.source})],2)],1)],1)},s=[],r={name:"ihris-section",props:["name","slotProps","title","description","edit","secondary"],data:function(){return{}},created:function(){},watch:{},methods:{}},n=r,o=a("2877"),l=a("6544"),u=a.n(l),c=a("b0af"),d=a("99d9"),h=Object(o["a"])(n,i,s,!1,null,null,null);e["default"]=h.exports;u()(h,{VCard:c["a"],VCardText:d["c"],VCardTitle:d["d"]})},eee9:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[a("v-select",{attrs:{loading:t.loading,label:t.display,items:t.items,outlined:"","hide-details":"auto","error-messages":t.errors,"item-text":"display","item-value":"code",disabled:t.disabled,rules:t.rules,dense:""},on:{change:function(e){t.errors=[]}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.display)+" "),t.required?a("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.valueCode,callback:function(e){t.valueCode=e},expression:"valueCode"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.display)+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.valueDisplay||t.value.display||"")+" ")]},proxy:!0}])})},s=[],r=(a("7db0"),a("b287")),n={name:"fhir-coding",props:["field","label","sliceName","targetprofile","min","max","base-min","base-max","slotProps","path","binding","edit","readOnlyIfSet","constraints"],components:{IhrisElement:r["a"]},data:function(){return{value:{system:"",code:"",display:""},valueCode:"",valueDisplay:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},disabled:!1,lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},valueCode:function(t){var e=this;if(this.items){var a=this.items.find((function(e){return e.code===t}));a&&(this.value=a)}this.value.system&&this.value.code&&this.$fhirutils.codeLookup(this.value.system,this.value.code,this.binding||this.source.binding).then((function(t){e.valueDisplay=t}))}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding||this.slotProps.source.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.source.data&&(this.value=this.source.data,this.valueCode=this.value.code,this.lockWatch=!0);else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),this.source.data[0]&&(this.value=this.source.data[0],this.valueCode=this.value.code,this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.valueCode}var a=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(a).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.errors=e.message,t.loading=!1}))}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]}}},o=n,l=a("2877"),u=a("6544"),c=a.n(u),d=a("b974"),h=Object(l["a"])(o,i,s,!1,null,null,null);e["default"]=h.exports;c()(h,{VSelect:d["a"]})},fa57:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-subtitle",{staticClass:"primary--text text-uppercase font-weight-bold"},[t._v(t._s(t.display))]),t._l(t.errors,(function(e,i){return a("v-card-text",{key:i,staticClass:"error white--text font-weight-bold"},[t._v(t._s(e))])})),a("v-card-text",[t._t("default",null,{source:t.source})],2)],2)},s=[],r={name:"ihris-complex-card",props:["complexField","slotProps","label","errors"],data:function(){return{source:{path:"",data:{}}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.complexField,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.complexField);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},n=r,o=a("2877"),l=a("6544"),u=a.n(l),c=a("b0af"),d=a("99d9"),h=Object(o["a"])(n,i,s,!1,null,null,null);e["a"]=h.exports;u()(h,{VCard:c["a"],VCardSubtitle:d["b"],VCardText:d["c"]})}}]);
//# sourceMappingURL=fhir-primary.25785460.js.map