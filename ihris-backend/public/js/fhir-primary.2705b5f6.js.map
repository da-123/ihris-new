{"version":3,"sources":["webpack:///./src/components/fhir/fhir-code.vue?3208","webpack:///src/components/fhir/fhir-code.vue","webpack:///./src/components/fhir/fhir-code.vue?3323","webpack:///./src/components/fhir/fhir-code.vue","webpack:///./src/components/fhir/fhir-codeable-concept.vue?22c8","webpack:///src/components/fhir/fhir-codeable-concept.vue","webpack:///./src/components/fhir/fhir-codeable-concept.vue?ecbe","webpack:///./src/components/fhir/fhir-codeable-concept.vue","webpack:///./src/components/ihris/ihris-secondary.vue?972e","webpack:///src/components/ihris/ihris-secondary.vue","webpack:///./src/components/ihris/ihris-secondary.vue?1e02","webpack:///./src/components/ihris/ihris-secondary.vue?0ac2","webpack:///./src/components/fhir/fhir-date-time.vue?88b3","webpack:///src/components/fhir/fhir-date-time.vue","webpack:///./src/components/fhir/fhir-date-time.vue?2bc2","webpack:///./src/components/fhir/fhir-date-time.vue","webpack:///./src/components/fhir/fhir-extension.vue?705b","webpack:///src/components/fhir/fhir-extension.vue","webpack:///./src/components/fhir/fhir-extension.vue?47dc","webpack:///./src/components/fhir/fhir-extension.vue","webpack:///./src/components/ihris/ihris-practitioner-intro.vue?636c","webpack:///src/components/ihris/ihris-practitioner-intro.vue","webpack:///./src/components/ihris/ihris-practitioner-intro.vue?faed","webpack:///./src/components/ihris/ihris-practitioner-intro.vue?04fb","webpack:///./src/components/ihris/ihris-resource.vue?28f5","webpack:///src/components/ihris/ihris-resource.vue","webpack:///./src/components/ihris/ihris-resource.vue?4610","webpack:///./src/components/ihris/ihris-resource.vue?3687","webpack:///./src/components/ihris/ihris-resource.vue?df79","webpack:///./src/components/fhir/fhir-date.vue?f033","webpack:///src/components/fhir/fhir-date.vue","webpack:///./src/components/fhir/fhir-date.vue?4d16","webpack:///./src/components/fhir/fhir-date.vue","webpack:///./src/components/fhir/fhir-human-name.vue?683b","webpack:///src/components/fhir/fhir-human-name.vue","webpack:///./src/components/fhir/fhir-human-name.vue?1f6c","webpack:///./src/components/fhir/fhir-human-name.vue","webpack:///./src/components/ihris/ihris-secondary.vue?fcb2","webpack:///./src/components/ihris/ihris-practitioner-intro.vue?0f68","webpack:///./src/components/ihris/ihris-element.vue?d414","webpack:///src/components/ihris/ihris-element.vue","webpack:///./src/components/ihris/ihris-element.vue?f139","webpack:///./src/components/ihris/ihris-element.vue","webpack:///./src/components/fhir/fhir-string.vue?4cb1","webpack:///src/components/fhir/fhir-string.vue","webpack:///./src/components/fhir/fhir-string.vue?44b5","webpack:///./src/components/fhir/fhir-string.vue","webpack:///./src/components/ihris/ihris-array.vue?cfa8","webpack:///src/components/ihris/ihris-array.vue","webpack:///./src/components/ihris/ihris-array.vue?3a77","webpack:///../../../src/components/VSystemBar/VSystemBar.ts","webpack:///./src/components/ihris/ihris-array.vue","webpack:///./src/components/fhir/fhir-identifier.vue?14bf","webpack:///src/components/fhir/fhir-identifier.vue","webpack:///./src/components/fhir/fhir-identifier.vue?f4c0","webpack:///./src/components/fhir/fhir-identifier.vue","webpack:///./src/components/ihris/ihris-section.vue?e4d9","webpack:///src/components/ihris/ihris-section.vue","webpack:///./src/components/ihris/ihris-section.vue?09ed","webpack:///./src/components/ihris/ihris-section.vue","webpack:///./src/components/fhir/fhir-coding.vue?29ce","webpack:///src/components/fhir/fhir-coding.vue","webpack:///./src/components/fhir/fhir-coding.vue?a2b4","webpack:///./src/components/fhir/fhir-coding.vue","webpack:///./src/components/ihris/ihris-complex-card.vue?fa2e","webpack:///src/components/ihris/ihris-complex-card.vue","webpack:///./src/components/ihris/ihris-complex-card.vue?a1f7","webpack:///./src/components/ihris/ihris-complex-card.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","edit","loading","scopedSlots","_u","key","fn","display","items","errors","disabled","rules","on","$event","_v","_s","staticClass","_e","proxy","model","value","callback","$$v","expression","displayValue","staticRenderFns","name","props","components","IhrisElement","data","source","lockWatch","created","setupData","watch","slotProps","handler","deep","methods","$fhirpath","evaluate","readOnlyIfSet","$fhirutils","expand","console","log","err","computed","index","found","required","min","component","VSelect","_t","binding","columns","title","_l","action","text","setupLink","link","class","ref","item","empty","topActions","isLeaveStock","mounted","profile","includes","url","fetch","response","json","then","firstDate","resource","linkId","searchField","field","queryStr","push","join","addItems","processContent","replace","VBtn","VContainer","VDataTable","VSpacer","VToolbar","VToolbarTitle","_g","label","menu","showGregorian","pickerType","minYear","maxYear","etValue","$vuetify","breakpoint","smAndUp","maxValueETDateTime","minValueETDateTime","save","dateValueMax","dateValueMin","VEthiopianDatePicker","qField","maxDate","maxValueDate","minDate","minValueDate","substring","minYearET","minValueETDate","maxYearET","maxValueETDate","isEthiopian","calendar","convertGE","val","setTimeout","convertEG","convertQuantity","$moment","etDate","year","toString","padStart","gDate","displayType","$refs","date","VCard","VCardText","VCardTitle","VDatePicker","VIcon","VMenu","VRow","VTextField","sliceName","intro","fullname","hasScrolled","isQuestionnaire","photoURL","employeeID","birthDate","gender","window","removeEventListener","handleScroll","addEventListener","beforeDestroy","top","scrollY","event","toggleContent","showMore","VImg","valid","overlay","staticStyle","$router","go","$emit","processFHIR","form","validate","links","length","idx","button","getLinkUrl","icon","linktext","section","path","secondary","desc","fhir","orig","isEdit","advancedValid","resourceType","hasPresets","current","parseInt","$route","query","last","hasFhirId","getLinkField","content","setLinkText","VDivider","VForm","VList","VListItem","VListItemContent","VListItemSubtitle","VListItemTitle","VNavigationDrawer","VOverlay","VProgressCircular","VSubheader","IhrisComplexCard","$store","state","cols","header","VCol","VProgressLinear","isPassword","showPassword","simpleValue","removeRow","addRow","input","inputs","isArray","setupInputs","splice","getField","actualMin","Math","max","addAvailable","displayIndex","subAvailable","simpleDisplay","mixins","height","Number","lightsOut","Boolean","classes","app","themeClasses","computedHeight","isNaN","styles","updateApplication","$el","style","$listeners","h","setBackgroundColor","VSystemBar","valueCode","valueDisplay","findValue","codeLookup","code","error","VCardSubtitle"],"mappings":"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","file":"js/fhir-primary.2705b5f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ihris-element',{attrs:{\"edit\":_vm.edit,\"loading\":_vm.loading},scopedSlots:_vm._u([{key:\"form\",fn:function(){return [_c('v-select',{attrs:{\"loading\":_vm.loading,\"label\":_vm.display,\"items\":_vm.items,\"outlined\":\"\",\"hide-details\":\"auto\",\"error-messages\":_vm.errors,\"item-text\":\"display\",\"item-value\":\"code\",\"disabled\":_vm.disabled,\"rules\":_vm.rules,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.display)+\" \"),(_vm.required)?_c('span',{staticClass:\"red--text font-weight-bold\"},[_vm._v(\"*\")]):_vm._e()]},proxy:true}]),model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})]},proxy:true},{key:\"header\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.display)+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.displayValue)+\" \")]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-element :edit=\"edit\" :loading=\"loading\">\n    <template #form>\n      <v-select \n        :loading=\"loading\" \n        :label=\"display\" \n        v-model=\"value\" \n        :items=\"items\" \n        outlined \n        hide-details=\"auto\" \n        :error-messages=\"errors\"\n        item-text=\"display\"\n        item-value=\"code\"\n        :disabled=\"disabled\"\n        :rules=\"rules\"\n        dense\n        @change=\"errors = []\"\n      >\n        <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-select>\n    </template>\n    <template #header>\n      {{display}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\n/*\nconst itemSort = (a,b) => {\n  return (a.display === b.display ? (a.code === b.code ? 0 : (a.code < b.code ? -1: 1)) : (a.display < b.display ? -1 : 1) )\n}\n*/\nexport default {\n  name: \"fhir-code\",\n  props: [\"field\",\"min\",\"max\",\"base-min\",\"base-max\",\"label\",\"binding\",\"slotProps\",\"path\",\"edit\",\"sliceName\",\"readOnlyIfSet\",\"constraints\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      value: \"\",\n      loading: true,\n      errors: [],\n      //error: false,\n      items: [],\n      source: { path: \"\", data: {}, binding: this.binding },\n      disabled: false,\n      lockWatch: false\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH CODE\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n      let binding = this.binding || this.slotProps.source.binding\n      this.$fhirutils.expand( binding ).then( items => {\n        this.items = items \n        this.loading = false\n      } ).catch( err => {\n        console.log(err)\n        //this.error = true\n        this.errors.push( err.message )\n        this.loading = false\n      } )\n    }\n  },\n  computed: {\n    index: function () {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    displayValue: function() {\n      let found = this.items.find( item => item.code === this.value )\n      if ( found ) {\n        return found.display\n      } else {\n        return \"\"\n      }\n    },\n    required: function() {\n      return (this.index || 0) < this.min \n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.display+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-code.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-code.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-code.vue?vue&type=template&id=9763cece&\"\nimport script from \"./fhir-code.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-code.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VSelect})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\",null,{\"source\":_vm.source})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <slot :source=\"source\"></slot>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"fhir-codeable-concept\",\n  props: [\"field\", \"slotProps\",\"sliceName\",\"min\",\"max\",\"base-min\",\"base-max\",\"label\",\"path\",\"binding\",\"edit\",\"constraints\"],\n  data: function() {\n    return {\n      source: { path: \"\", data: {}, binding: this.binding },\n      errors: []\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH CODEABLECONCEPT\",this.path,this.slotProps)\n        this.setupData()\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData: function() {\n      //console.log(\"CC\",this.field,this.path,this.source,this.slotProps)\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {}, \n          binding: this.binding }\n        //console.log(\"CC binding\",this.binding)\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n        }\n        //console.log(\"CC2\",this.field,this.source)\n      }\n    }\n  },\n  computed: {\n    display: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.label\n      else return this.label\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-codeable-concept.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-codeable-concept.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-codeable-concept.vue?vue&type=template&id=77e24c22&\"\nimport script from \"./fhir-codeable-concept.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-codeable-concept.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.edit)?_c('v-container',{staticClass:\"my-3\"},[(_vm.isLeaveStock)?_c('div',{staticClass:\"leave-notification\"},[_vm._v(\" juste un exemple de texte ici \")]):_vm._e(),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.columns,\"items\":_vm.items,\"item-key\":\"id\",\"items-per-page\":5,\"loading\":_vm.loading,\"dense\":\"\"},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]),_c('v-spacer'),_vm._l((_vm.topActions),function(action){return _c('v-btn',{key:action.text,attrs:{\"to\":_vm.setupLink( action.link, {} ),\"color\":action.class,\"small\":\"\"}},[_vm._v(\" \"+_vm._s(action.text)+\" \")])})],2)]},proxy:true},{key:\"item._action\",fn:function(ref){\nvar item = ref.item;\nreturn _vm._l((item.actions),function(action){return _c('v-btn',{key:action.text,attrs:{\"to\":_vm.setupLink( action.link, item ),\"color\":action.class,\"small\":\"\",\"rounded\":\"\"}},[_vm._v(\" \"+_vm._s(action.text)+\" \")])})}}],null,false,3813068814)})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style scoped>\n.leave-notification{\n    width: 100%;\n    height: 40px;\n    position: relative;\n    top: -24px;\n    background-color: #d06f1a;\n    border-radius: 0px 0px 10px 10px;\n    color:#ffff;\n    padding:3px;\n}\n</style>\n<template>\n  <v-container class=\"my-3\" v-if=\"!edit\">\n    <div v-if=\"isLeaveStock\" class=\"leave-notification\">\n      juste un exemple de texte ici\n    </div>\n    <v-data-table\n      :headers=\"columns\"\n      :items=\"items\"\n      item-key=\"id\"\n      :items-per-page=\"5\"\n      :loading=\"loading\"\n      class=\"elevation-1\"\n      dense\n    >\n\n      <template v-slot:top>\n        <v-toolbar flat color=\"white\">\n          <v-toolbar-title>\n            {{ title }}\n          </v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-btn\n            v-for=\"action in topActions\"\n            :to=\"setupLink( action.link, {} )\"\n            :color=\"action.class\"\n            :key=\"action.text\"\n            small\n            >\n            {{ action.text }}\n          </v-btn>\n        </v-toolbar>\n      </template>\n      <template v-slot:item._action=\"{ item }\">\n        <v-btn\n          v-for=\"action in item.actions\"\n          :to=\"setupLink( action.link, item )\"\n          :color=\"action.class\"\n          :key=\"action.text\"\n          small\n          rounded\n          >\n          {{ action.text }}\n        </v-btn>\n      </template>\n    </v-data-table>\n  </v-container>\n</template>\n\n<script>\nconst isObject = (obj) => {\n  return (!!obj) && (obj.constructor === Object)\n}\n\nexport default {\n  name: \"ihris-secondary\",\n  props: [\"title\", \"field\", \"profile\", \"slotProps\", \"link-id\", \"link-field\",\n    \"search-field\", \"edit\", \"columns\", \"actions\"],\n  data: function() {\n    return {\n      source: { data: {}, path: this.field },\n      empty: true,\n      items: [],\n      loading: true,\n      topActions: [],\n      isLeaveStock:false\n    }\n  },\n  mounted: function() {\n    this.setupData()\n  },\n  created:function(){\n    this.isLeaveStock = this.profile.includes(\"ihris-basic-ethiopia-leave-stock\")\n\n    if(this.profile.includes(\"http://ihris.org/fhir/StructureDefinition/ihris-job-description\")){\n\n      let param = this.linkField.replace(\".\",\"_\").substring(this.linkField.lastIndexOf('.'))\n\n      let url = \"fhir/\" + this.field + \"?\"+param+\"=\" + this.linkId \n      \n      console.log(\"URL \", url)\n\n      let firstDate =\"\"\n\n      fetch( url ).then( response => {\n        console.log(\"RESPONSE \", response)\n        if ( response.status === 200 ) {\n          response.json().then(data => {\n            if(data.entry){\n             let extensions = data.entry.extension;\n\n             console.log(\"Extensions \", extensions)\n\n             firstDate = extensions.find(\n               ext => ext.url === \"http://ihris.org/fhir/StructureDefinition/ihris-practitionerrole-first-employment-date\"\n               ).valueDate\n\n              console.log(\"FIRST DATE \", firstDate)\n            }\n          })\n        }\n       })\n    }\n\n    /*let url = \"/fhir/\"+this.field\n      let opts = {\n        method: \"GET\",\n      } \n      opts.body = JSON.stringify(this.fhir)\n      console.log(\"SAVE\",url,this.fhir)\n      fetch( url, opts ).then(response => {\n        //console.log(response)\n        //console.log(response.headers)\n        if ( response.status === 201 || response.status === 200 ) {\n          response.json().then(data => {\n            console.log(\"DATA \",data)\n          })\n        }\n      })*/\n  },\n  watch: {\n    /*\n    slotProps: {\n      handler() {\n        this.setupData()\n      },\n      deep: true\n    }\n    */\n  },\n  methods: {\n    setupData: function() {\n      /*\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, this.field )\n        }\n        //console.log(this.source)\n      }\n      */\n      let url\n      //for searchfield in the form Location:organization with Location being the primary resource, then use _include to retrieve secondary resources\n      if(this.searchField.split(':').length === 2) {\n        let resource = this.searchField.split(':')[0]\n        url = \"fhir/\" + resource + \"?_id=\" + this.linkId + \"&_include=\" + this.searchField\n      } else {\n        url = \"/fhir/\" + this.field\n        let queryStr = []\n        if ( this.profile ) {\n          queryStr.push( \"_profile=\"+this.profile )\n        }\n        if ( this.searchField ) {\n          queryStr.push( this.searchField+\"=\"+this.linkId )\n        } else {\n          queryStr.push( this.linkField.substring( this.linkField.indexOf('.') +1 ) +\"=\"+this.linkId )\n        }\n        url += \"?\" + queryStr.join(\"&\")\n      }\n      this.items = []\n      this.loading = true\n      this.addItems( url )\n    },\n    addItems: function (url) {\n      fetch( url ).then( response => {\n        if ( response.status === 200 ) {\n          response.json().then( async data => {\n            if ( data.entry && data.entry.length > 0 ) {\n              for( let entry of data.entry ) {\n                if(this.searchField.split(':').length === 2 && entry.resource.resourceType === this.searchField.split(':')[0]) {\n                  continue\n                }\n                let row = { id: entry.resource.id }\n                for( let header of this.columns ) {\n                  if ( header.value === \"_action\" ) continue\n                  try {\n                    let content = this.$fhirpath.evaluate( entry.resource, header.value )\n                    row[header.value] = await this.processContent( content )\n                  } catch ( err ) {\n                    console.log(err)\n                  }\n                }\n                if ( !row.actions ) row.actions = []\n                for( let action of this.actions ) {\n                  if ( action.row ) {\n                    if ( action.condition ) {\n                      let meets = this.$fhirpath.evaluate( entry.resource, action.condition )\n                      if ( meets.every( meet => meet ) ) {\n                        row.actions.push( action )\n                      }\n                    } else {\n                      row.actions.push( action )\n                    }\n                  } else {\n                    if ( action.condition ) {\n                      let meets = this.$fhirpath.evaluate( entry.resource, action.condition )\n                      if ( action.hasOwnProperty(\"meets\") ) {\n                        action.meets = action.meets && meets.every( meet => meet )\n                      } else {\n                        action.meets = meets.every( meet => meet )\n                      }\n                    } else {\n                      action.meets = true\n                    }\n                  }\n                }\n                this.items.push( row )\n              }\n            } else {\n              for( let action of this.actions ) {\n                if ( !action.row ) {\n                  action.meets = action.emptyDisplay\n                }\n              }\n            }\n            this.topActions = this.actions.filter( action => !action.row && action.meets )\n\n\n            if ( data.link ) {\n              let next = data.link.find( link => link.relation === \"next\" )\n              if ( next ) {\n                this.addItems( next.url )\n              } else {\n                this.loading = false\n              }\n            } else {\n              this.loading = false\n            }\n          } ).catch( err => {\n            this.loading = false\n            console.log(err)\n          } )\n        } else {\n          this.loading = false\n          console.log(\"Unable to fetch\",url,response.status)\n        }\n      } ).catch( err => {\n        this.loading = false\n        console.log(err)\n      } )\n\n    },\n    processContent: async function( content ) {\n      if ( Array.isArray( content ) ) {\n        let output = await Promise.all(content.map( this.processContent ))\n        return output.join(\" \")\n      } else if ( isObject( content ) ) {\n        if ( content.code && content.system ) {\n          return await this.$fhirutils.codeLookup( content.system, content.code )\n        } else if ( content.display ) {\n          return content.display\n        } else if ( content.code ) {\n          return content.code\n        } else if ( content.reference ) {\n          return await this.$fhirutils.resourceLookup( content.reference)\n        } else {\n          console.log(\"Unable to process content:\",content)\n          return \"Unknown\"\n        }\n      } else {\n        return content\n      }\n    },\n    setupLink( link, item ) {\n      return link.replace( \"ITEMID\", item.id ).replace( \"FHIRID\", this.linkId )\n    }\n  }\n}\n\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-secondary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-secondary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-secondary.vue?vue&type=template&id=2a8e5801&scoped=true&\"\nimport script from \"./ihris-secondary.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-secondary.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ihris-secondary.vue?vue&type=style&index=0&id=2a8e5801&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a8e5801\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VContainer,VDataTable,VSpacer,VToolbar,VToolbarTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ihris-element',{attrs:{\"edit\":_vm.edit,\"loading\":false},scopedSlots:_vm._u([{key:\"form\",fn:function(){return [_c('v-menu',{ref:\"menu\",attrs:{\"close-on-content-click\":false,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"290px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-text-field',_vm._g({attrs:{\"label\":_vm.label,\"prepend-inner-icon\":\"mdi-calendar\",\"readonly\":\"\",\"outlined\":\"\",\"hide-details\":\"auto\",\"rules\":_vm.rules,\"error-messages\":_vm.errors,\"dense\":\"\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.label)+\" \"),(_vm.required)?_c('span',{staticClass:\"red--text font-weight-bold\"},[_vm._v(\"*\")]):_vm._e()]},proxy:true}],null,true),model:{value:(_vm.displayValue),callback:function ($$v) {_vm.displayValue=$$v},expression:\"displayValue\"}},on))]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[(_vm.isEthiopian)?_c('v-container',{staticClass:\"ma-0 pa-0\"},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-card',{attrs:{\"min-width\":\"300px\"}},[_c('v-card-title',{staticClass:\"primary white--text\"},[_vm._v(\" Ethiopian Calendar\"),_c('v-spacer'),_c('v-btn',{staticClass:\"white--text\",attrs:{\"dark\":\"\",\"icon\":\"\",\"group\":\"\",\"small\":\"\"},on:{\"click\":function($event){_vm.showGregorian = !_vm.showGregorian}}},[(!_vm.showGregorian)?_c('v-icon',[_vm._v(\"mdi-calendar-multiple\")]):_c('v-icon',[_vm._v(\"mdi-calendar\")])],1)],1),(_vm.pickerType==='year')?_c('v-card-text',[_c('br'),_c('v-text-field',{attrs:{\"clearable\":\"\",\"type\":\"number\",\"disabled\":_vm.disabled,\"label\":_vm.label,\"min\":_vm.minYear,\"max\":_vm.maxYear,\"rules\":_vm.rules,\"error-messages\":_vm.errors,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},model:{value:(_vm.etValue),callback:function ($$v) {_vm.etValue=$$v},expression:\"etValue\"}})],1):_c('v-ethiopian-date-picker',{ref:\"etPicker\",attrs:{\"label\":\"Ethiopian\",\"color\":\"secondary\",\"landscape\":_vm.$vuetify.breakpoint.smAndUp,\"max\":_vm.maxValueETDateTime,\"min\":_vm.minValueETDateTime,\"type\":_vm.pickerType,\"disabled\":_vm.disabled,\"locale\":\"am\"},on:{\"change\":_vm.save},model:{value:(_vm.etValue),callback:function ($$v) {_vm.etValue=$$v},expression:\"etValue\"}})],1),(_vm.showGregorian)?_c('v-card',{attrs:{\"min-width\":\"300px\"}},[_c('v-card-title',{staticClass:\"primary white--text\"},[_vm._v(\" Gregorian Calendar\"),_c('v-spacer'),_c('v-btn',{staticClass:\"white--text\",attrs:{\"dark\":\"\",\"icon\":\"\",\"group\":\"\",\"small\":\"\"},on:{\"click\":function($event){_vm.showGregorian = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),(_vm.pickerType==='year')?_c('v-card-text',[_c('br'),_c('v-text-field',{attrs:{\"clearable\":\"\",\"type\":\"number\",\"disabled\":_vm.disabled,\"label\":_vm.label,\"min\":_vm.minYear,\"max\":_vm.maxYear,\"rules\":_vm.rules,\"error-messages\":_vm.errors,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1):_c('v-date-picker',{ref:\"gPicker\",attrs:{\"color\":\"secondary\",\"landscape\":_vm.$vuetify.breakpoint.smAndUp,\"max\":_vm.dateValueMax,\"min\":_vm.dateValueMin,\"type\":_vm.pickerType,\"disabled\":_vm.disabled},on:{\"change\":_vm.save},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1):_vm._e()],1)],1):(_vm.pickerType==='year')?_c('v-card',{attrs:{\"min-width\":\"300px\"}},[_c('v-card-text',[_c('br'),_c('v-text-field',{attrs:{\"type\":\"number\",\"disabled\":_vm.disabled,\"label\":_vm.label,\"min\":_vm.minYear,\"max\":_vm.maxYear,\"rules\":_vm.rules,\"error-messages\":_vm.errors,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)],1):_c('v-date-picker',{ref:\"picker\",attrs:{\"color\":\"secondary\",\"landscape\":_vm.$vuetify.breakpoint.smAndUp,\"max\":_vm.dateValueMax,\"min\":_vm.dateValueMin,\"type\":_vm.pickerType,\"disabled\":_vm.disabled},on:{\"change\":_vm.save},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]},proxy:true},{key:\"header\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.label)+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.displayValue)+\" \")]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n     <v-menu \n        ref=\"menu\" \n        v-model=\"menu\" \n        :close-on-content-click=\"false\" \n        transition=\"scale-transition\" \n        offset-y \n        min-width=\"290px\"\n      >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"label\"\n            prepend-inner-icon=\"mdi-calendar\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            dense\n          >\n            <template #label>{{label}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n\n        <v-container class=\"ma-0 pa-0\" v-if=\"isEthiopian\">\n          <v-row no-gutters>\n            <v-card min-width=\"300px\">\n              <v-card-title class=\"primary white--text\">\n                Ethiopian Calendar<v-spacer/><v-btn\n                  dark\n                  class=\"white--text\"\n                  icon\n                  @click=\"showGregorian = !showGregorian\"\n                  group\n                  small\n                  ><v-icon v-if=\"!showGregorian\" >mdi-calendar-multiple</v-icon><v-icon v-else>mdi-calendar</v-icon></v-btn>\n              </v-card-title>\n              <v-card-text v-if=\"pickerType==='year'\">\n                <br />\n                <v-text-field \n                  v-model=\"etValue\" \n                  clearable\n                  type=\"number\" \n                  :disabled=\"disabled\" \n                  :label=\"label\" \n                  :min=\"minYear\" \n                  :max=\"maxYear\" \n                  :rules=\"rules\" \n                  :error-messages=\"errors\"\n                  @change=\"errors = []\"\n                  dense\n                >\n                </v-text-field>\n              </v-card-text>\n              <v-ethiopian-date-picker\n                v-else\n                ref=\"etPicker\"\n                label=\"Ethiopian\"\n                color=\"secondary\"\n                :landscape=\"$vuetify.breakpoint.smAndUp\"\n                v-model=\"etValue\"\n                :max=\"maxValueETDateTime\"\n                :min=\"minValueETDateTime\"\n                :type=\"pickerType\"\n                :disabled=\"disabled\"\n                @change=\"save\"\n                locale=\"am\"\n                ></v-ethiopian-date-picker>\n            </v-card>\n            <v-card v-if=\"showGregorian\" min-width=\"300px\">\n              <v-card-title class=\"primary white--text\">\n                Gregorian Calendar<v-spacer/><v-btn\n                  dark\n                  class=\"white--text\"\n                  icon\n                  @click=\"showGregorian = false\"\n                  group\n                  small\n                  ><v-icon>mdi-close</v-icon></v-btn>\n              </v-card-title>\n              <v-card-text v-if=\"pickerType==='year'\">\n                <br />\n                <v-text-field \n                  v-model=\"value\" \n                  clearable\n                  type=\"number\" \n                  :disabled=\"disabled\" \n                  :label=\"label\" \n                  :min=\"minYear\" \n                  :max=\"maxYear\" \n                  :rules=\"rules\" \n                  :error-messages=\"errors\"\n                  @change=\"errors = []\"\n                  dense\n                >\n                </v-text-field>\n              </v-card-text>\n              <v-date-picker\n                v-else\n                ref=\"gPicker\"\n                color=\"secondary\"\n                :landscape=\"$vuetify.breakpoint.smAndUp\"\n                v-model=\"value\"\n                :max=\"dateValueMax\"\n                :min=\"dateValueMin\"\n                :type=\"pickerType\"\n                :disabled=\"disabled\"\n                @change=\"save\"\n                ></v-date-picker>\n            </v-card>\n          </v-row>\n        </v-container>\n        <v-card min-width=\"300px\" v-else-if=\"pickerType==='year'\" >\n          <v-card-text>\n            <br />\n            <v-text-field \n              v-model=\"value\" \n              type=\"number\" \n              :disabled=\"disabled\" \n              :label=\"label\" \n              :min=\"minYear\" \n              :max=\"maxYear\" \n              :rules=\"rules\" \n              :error-messages=\"errors\"\n              @change=\"errors = []\"\n              dense\n            >\n            </v-text-field>\n          </v-card-text>\n        </v-card>\n        <v-date-picker\n          v-else\n          ref=\"picker\"\n          color=\"secondary\"\n          :landscape=\"$vuetify.breakpoint.smAndUp\"\n          v-model=\"value\"\n          :max=\"dateValueMax\"\n          :min=\"dateValueMin\"\n          :type=\"pickerType\"\n          :disabled=\"disabled\"\n          @change=\"save\"\n        ></v-date-picker>\n\n      </v-menu>\n    </template>\n    <template #header>\n      {{label}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\nimport VEthiopianDatePicker from \"vuetify-ethiopian-calendar\"\nimport ethiopic from \"ethiopic-calendar\"\n\nexport default {\n  name: \"fhir-date-time\",\n  props: [\"field\",\"min\",\"max\",\"base-min\",\"base-max\", \"label\", \"slotProps\", \"path\", \"edit\",\"sliceName\", \n    \"minValueDateTime\", \"maxValueDateTime\", \"minValueQuantity\", \"maxValueQuantity\", \"displayType\",\"readOnlyIfSet\", \"calendar\",\n    \"constraints\"],\n  components: {\n    IhrisElement,\n    VEthiopianDatePicker\n  },\n  data: function() {\n    return {\n      value: null,\n      etValue: null,\n      menu: false,\n      source: { path: \"\", data: {} },\n      qField: \"valueDateTime\",\n      pickerType: \"date\",\n      disabled: false,\n      showGregorian: false,\n      errors: [],\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE DATETIME\",this.field,this.slotProps)\n    this.setupData()\n  },\n  computed: {\n    dateValueMax: function() {\n      if ( this.maxValueQuantity ) {\n        let maxDate = this.convertQuantity( this.maxValueQuantity, \"add\" )\n        if ( maxDate ) {\n          return maxDate\n        }\n      } \n      if ( this.maxValueDate ) {\n        return this.maxValueDate\n      }\n      return undefined\n    },\n    dateValueMin: function() {\n      if ( this.minValueQuantity ) {\n        let minDate = this.convertQuantity( this.minValueQuantity, \"subtract\" )\n        if ( minDate ) {\n          return minDate\n        }\n      } else if ( this.minValueDate ) {\n        return this.minValueDate\n      }\n      return undefined\n    },\n    minYear: function() {\n      return this.dateValueMin ? this.dateValueMin.substring(0,4) : undefined\n    },\n    maxYear: function() {\n      return this.dateValueMax ? this.dateValueMax.substring(0,4) : undefined\n    },\n    minYearET: function() {\n      return this.minValueETDate ? this.minValueETDate.substring(0,4) : undefined\n    },\n    maxYearET: function() {\n      return this.maxValueETDate ? this.maxValueETDate.substring(0,4) : undefined\n    },\n    isEthiopian: function() {\n      return this.calendar === \"Ethiopian\"\n    },\n    minValueETDateTime: function() {\n      if ( this.dateValueMin ) {\n        return this.convertGE( this.dateValueMin )\n      } else {\n        return null\n      }\n    },\n    maxValueETDateTime: function() {\n      if ( this.dateValueMax ) {\n        return this.convertGE( this.dateValueMax )\n      } else {\n        return null\n      }\n    },\n    displayValue: function() {\n      if ( this.isEthiopian ) {\n        return this.value && \"Ethiopian: \"+this.etValue + \" Gregorian: \" + this.value \n      } else {\n        return this.value\n      }\n    },\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.label+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  },\n  watch: {\n    menu (val) {\n      if ( this.isEthiopian ) {\n        !this.value && val && setTimeout(() => (this.$refs.etPicker.activePicker = 'YEAR'))\n      } else {\n        !this.value && val && setTimeout(() => (this.$refs.picker.activePicker = 'YEAR'))\n      }\n    },\n    showGregorian (val) {\n      !this.value && val && setTimeout(() => (this.$refs.gPicker.activePicker = 'YEAR'))\n    },\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH DATETIME\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    value (val) {\n      if ( !val ) {\n        this.etValue = val\n      } else if ( this.pickerType === 'year' ) {\n        if ( val.length === 4 ) {\n          this.etValue = this.convertGE( val )\n        }\n       } else {\n        this.etValue = this.convertGE( val )\n      }\n    },\n    etValue (val) {\n      if ( !val ) {\n        this.value = val\n      } else if ( this.pickerType === 'year' ) {\n        if ( val.length === 4 ) {\n          this.value = this.convertEG( val )\n        }\n      } else {\n        this.value = this.convertEG( val )\n      }\n    }\n  },\n  methods: {\n    convertQuantity(val, direction) {\n      const unitsofmeasure = {\n        'a': 'years',\n        'mo': 'months',\n        'wk': 'weeks',\n        'd': 'days',\n      }\n      const quant = /(-?\\d+)([a-z]{1,3})/\n\n      let match = val.match( quant )\n      if ( match.length === 3 ) {\n        try {\n          let value = match[1]\n          let unit = unitsofmeasure[ match[2] ]\n          if ( direction === \"subtract\" ) {\n            return this.$moment( this.$moment().subtract(value, unit) ).format('YYYY-MM-DD')\n          } else {\n            return this.$moment( this.$moment().add(value, unit) ).format('YYYY-MM-DD')\n          }\n        } catch (e) {\n          console.log(\"Failed to get date from quantity\",e)\n        }\n      }\n      return undefined\n    },\n    convertGE(val) {\n      if ( !val ) return val\n      const [ year, month, day ] = val.split('-').map(Number)\n      if ( this.pickerType === 'year' ) {\n        let etDate = ethiopic.ge( year, month || 6, day || 1) // so it will be the same year in both directions\n        return etDate.year.toString().padStart(4,'0') \n      } else {\n        let etDate = ethiopic.ge( year, month || 1, day || 1)\n        return etDate.year.toString().padStart(4,'0') + \"-\" + etDate.month.toString().padStart(2,'0') + \"-\" + etDate.day.toString().padStart(2, '0')\n      }\n    },\n    convertEG(val) {\n      if ( !val ) return val\n      const [ etYear, etMonth, etDay ] = val.split('-').map(Number)\n      if ( this.pickerType === 'year' ) {\n        let gDate = ethiopic.eg( etYear, etMonth|| 6, etDay || 1) // so it will be the same year in both directions\n        return gDate.year.toString().padStart(4,'0') \n      } else {\n        let gDate = ethiopic.eg( etYear, etMonth || 1, etDay || 1)\n        return gDate.year.toString().padStart(4,'0') + \"-\" + gDate.month.toString().padStart(2,'0') + \"-\" + gDate.day.toString().padStart(2, '0')\n      }\n    },\n    setupData() {\n      if ( this.displayType ) {\n        this.pickerType = this.displayType\n      }\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n    },\n    save (date) {\n      this.errors = []\n      this.$refs.menu.save(date)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-date-time.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-date-time.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-date-time.vue?vue&type=template&id=39ffedfd&\"\nimport script from \"./fhir-date-time.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-date-time.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDatePicker } from 'vuetify/lib/components/VDatePicker';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VContainer,VDatePicker,VIcon,VMenu,VRow,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\",null,{\"source\":_vm.source})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <slot :source=\"source\"></slot>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"fhir-extension\",\n  props: [\"field\",\"sliceName\",\"min\",\"max\",\"base-min\",\"base-max\",\"profile\",\"slotProps\",\"path\", \"edit\",\"constraints\"],\n  data: function() {\n    return {\n      source: { path: \"\", data: [] },\n      errors: []\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH EXTENSION\",this.path,this.slotProps)\n        this.setupData()\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData: function() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          let url\n          if ( this.profile ) {\n            url = this.profile\n          } else {\n            url = this.sliceName\n          }\n          let expression = this.field.replace(/([^:]+):(.+)/, \"$1.where(url='\"+url+\"')\")\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n        }\n        //console.log(this.source)\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-extension.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-extension.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-extension.vue?vue&type=template&id=28ee29bb&\"\nimport script from \"./fhir-extension.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-extension.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.intro.fullname !== '')?_c('div',{class:['ihris-intro-container',(_vm.hasScrolled || this.isQuestionnaire) ? 'show':'hide']},[_c('v-img',{staticClass:\"photo\",attrs:{\"src\":_vm.photoURL,\"contain\":\"\",\"max-height\":150,\"position\":\"left\"}}),_c('div',{staticClass:\"ihris-intro\"},[_c('span',[_vm._v(\"Employee ID : \"+_vm._s(_vm.intro.employeeID))]),_c('span',[_vm._v(\"Full name : \"+_vm._s(_vm.intro.fullname))]),_c('span',[_vm._v(\"Date of Birth : \"+_vm._s(_vm.intro.birthDate))]),_c('span',[_vm._v(\"Gender : \"+_vm._s(_vm.intro.gender))])])],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style scoped>\n.ihris-intro-container{\n    display: flex;\n    flex-direction: row;\n    position: fixed;\n    background-color: #d06f1a;\n    width: 30vw;\n    z-index: 1;\n    top: 11%;\n    padding: 2px;\n    color: #fff;\n    font-size: smaller;\n    padding-left: 5px;\n    border-radius: 0 0 10px 10px;\n    left: 50%;\n    transform: translate(-50%,-50%);\n}\n.ihris-intro{\n    display: flex;\n    flex-direction: column;\n    padding: 5px;\n}\n\n.hide {\n    opacity:0;\n}\n.show {\n    opacity:1;\n}\n.photo{\n  max-width: 30%;\n}\n</style>\n\n<template>\n<div v-if=\"intro.fullname !== ''\" :class=\"['ihris-intro-container',(hasScrolled || this.isQuestionnaire) ? 'show':'hide']\">\n     <v-img :src=\"photoURL\" contain :max-height=\"150\" class=\"photo\" position=\"left\" />\n     <div class=\"ihris-intro\">\n          <span>Employee ID : {{intro.employeeID}}</span>\n          <span>Full name : {{intro.fullname}}</span>\n          <span>Date of Birth : {{intro.birthDate}}</span>\n          <span>Gender : {{intro.gender}}</span>\n          <!--<span>Facility/Location : {{intro.gender}}</span>\n          <span>Job title : {{intro.gender}}</span>\n          <span>Employment status : {{intro.gender}}</span>-->\n    </div>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"ihris-practitioner-intro\",\n  props: [\"slotProps\", \"isQuestionnaire\"],\n  data: function() {\n    return {\n\n      intro:{\n        display:\"Health Worker\",\n        fullname:\"\",\n        photoURL:\"\",\n        birthDate:\"\",\n        gender:\"\",\n        employeeID:\"\"\n      },\n      hasScrolled:false,\n    }\n  },\n  components:{\n     \n  },\n  mounted(){\n\n    if(!this.isQuestionnaire){\n      window.addEventListener('scroll', this.handleScroll);\n    }else{\n      window.removeEventListener('scroll', this.handleScroll);\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n  },\n  methods: {\n    setupData() {\n\n      if ( this.slotProps && this.slotProps.source ) {\n\n          let practitioner = this.slotProps.source.data\n\n          let firstName = practitioner.name[0].given[0];\n\n          this.intro.gender = practitioner.gender;\n\n          this.intro.birthDate = practitioner.birthDate\n\n          this.intro.employeeID = practitioner.identifier[0].value\n\n          let extensions =  practitioner.extension[0]//.filter(ext => ext.url === 'http://ihris.org/fhir/StructureDefinition/ihris-practitioner-familynames')\n\n          extensions = extensions.extension\n\n          let fatherName = extensions.filter(ext => ext.url === 'fathers')\n\n          let grandFatherLastName = extensions.filter(ext => ext.url === 'grandfatherslastname')\n\n          \n          let photo = practitioner.photo[0]\n\n          this.intro.fullname = firstName+\" \"+fatherName[0].valueString+\" \"+grandFatherLastName[0].valueString\n\n         /*if ( this.photoURL ) {\n            URL.revokeObjectURL( this.photoURL )\n          }*/\n          if ( photo.data && photo.contentType ) {\n            let dataURL = \"data:\"+photo.contentType+\";base64,\"+photo.data\n            fetch(dataURL).then( res => res.blob() ).then( blob => {\n              this.photoURL = URL.createObjectURL( blob ) \n              //URL.revokeObjectURL(this.photoURL)\n              }).catch( e => {\n              console.log(\"Failed to get data from base64.\",e)\n            } )\n          }\n\n        }\n    },\n    handleScroll(event) {\n      // Any code to be executed when the window is scrolled\n      console.log(window.top.scrollY);\n      this.hasScrolled = (window.top.scrollY >= 100);\n      console.log(event);\n    },\n    toggleContent(){\n      this.showMore = !this.showMore;\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-practitioner-intro.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-practitioner-intro.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-practitioner-intro.vue?vue&type=template&id=23658de9&scoped=true&\"\nimport script from \"./ihris-practitioner-intro.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-practitioner-intro.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ihris-practitioner-intro.vue?vue&type=style&index=0&id=23658de9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23658de9\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VImg})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"my-3\"},[_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_vm._t(\"default\",null,{\"source\":_vm.source}),_c('v-overlay',{attrs:{\"value\":_vm.overlay}},[_c('v-progress-circular',{attrs:{\"size\":\"50\",\"color\":\"primary\",\"indeterminate\":\"\"}})],1),_c('v-navigation-drawer',{staticClass:\"primary darken-1 white--text\",staticStyle:{\"z-index\":\"3\"},attrs:{\"app\":\"\",\"right\":\"\",\"permanent\":\"\",\"clipped\":\"\"}},[_c('v-list',{staticClass:\"white--text\"},[_c('v-list-item',[(!_vm.edit)?_c('v-btn',{staticClass:\"secondary\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$emit('set-edit', !_vm.edit)}}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(\"mdi-pencil\")]),_c('span',[_vm._v(\"Edit\")])],1):_c('v-btn',{staticClass:\"secondary\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$router.go(0)}}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(\"mdi-pencil-off\")]),_c('span',[_vm._v(\"Cancel\")])],1),_c('v-spacer'),(_vm.edit)?[(_vm.valid)?_c('v-btn',{staticClass:\"success darken-1\",attrs:{\"dark\":\"\",\"disabled\":!_vm.valid},on:{\"click\":function($event){return _vm.processFHIR()}}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(\"mdi-content-save\")]),_c('span',[_vm._v(\"Save\")])],1):_c('v-btn',{staticClass:\"warning\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$refs.form.validate()}}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(\"mdi-content-save\")]),_c('span',[_vm._v(\"Save\")])],1)]:_vm._e()],2),_c('v-divider',{attrs:{\"color\":\"white\"}}),(!_vm.edit && _vm.links && _vm.links.length)?_vm._l((_vm.links),function(link,idx){return _c('v-list-item',{key:link.url},[_c('v-btn',{key:link.url,staticClass:\"primary\",attrs:{\"text\":!link.button,\"to\":_vm.getLinkUrl(link)}},[(link.icon)?_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(_vm._s(link.icon))]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.linktext[idx])+\" \")],1)],1)}):_vm._e(),(_vm.sectionMenu)?_c('v-subheader',{staticClass:\"white--text\"},[_c('h2',[_vm._v(\"Sections\")])]):_vm._e(),_vm._l((_vm.sectionMenu),function(section){return _c('v-list-item',{key:section.name,class:'#section-'+section.name === _vm.path ? 'highlighted' : '',attrs:{\"href\":'#section-'+section.name}},[(!_vm.edit || !section.secondary)?_c('v-list-item-content',{staticClass:\"white--text\"},[_c('v-list-item-title',{staticClass:\"text-uppercase\"},[_c('h4',[_vm._v(_vm._s(section.title))])]),_c('v-list-item-subtitle',{staticClass:\"white--text\"},[_vm._v(_vm._s(section.desc))])],1):_vm._e()],1)})],2)],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style >\n.highlighted{\n  background-color: #5396dc !important;\n}\n</style>\n<template>\n  <v-container class=\"my-3\">\n        \n    <v-form \n      ref=\"form\"\n      v-model=\"valid\"\n    >\n  \n      <slot :source=\"source\"></slot>\n      <v-overlay :value=\"overlay\">\n        <v-progress-circular\n          size=\"50\"\n          color=\"primary\"\n          indeterminate\n          ></v-progress-circular>\n      </v-overlay>\n\n      <v-navigation-drawer\n        app\n        right\n        permanent\n        clipped\n        class=\"primary darken-1 white--text\"\n        style=\"z-index: 3;\"\n        >\n        <v-list class=\"white--text\">\n          <v-list-item>\n            <v-btn v-if=\"!edit\" dark class=\"secondary\" @click=\"$emit('set-edit', !edit)\">\n              <v-icon light>mdi-pencil</v-icon>\n              <span>Edit</span>\n            </v-btn>\n            <v-btn v-else dark class=\"secondary\" @click=\"$router.go(0)\">\n              <v-icon light>mdi-pencil-off</v-icon>\n              <span>Cancel</span>\n            </v-btn>\n            <v-spacer></v-spacer>\n            <template v-if=\"edit\">\n              <v-btn v-if=\"valid\" dark class=\"success darken-1\" @click=\"processFHIR()\" :disabled=\"!valid\">\n                <v-icon light>mdi-content-save</v-icon>\n                <span>Save</span>\n              </v-btn>\n              <v-btn v-else dark class=\"warning\" @click=\"$refs.form.validate()\">\n                <v-icon light>mdi-content-save</v-icon>\n                <span>Save</span>\n              </v-btn>\n            </template>\n          </v-list-item>\n          <v-divider color=\"white\"></v-divider>\n          <template v-if=\"!edit && links && links.length\">\n            <v-list-item v-for=\"(link,idx) in links\" :key=\"link.url\">\n              <v-btn :key=\"link.url\" :text=\"!link.button\" :to=\"getLinkUrl(link)\" class=\"primary\">\n                <v-icon light v-if=\"link.icon\">{{link.icon}}</v-icon>\n                {{ linktext[idx]  }}\n              </v-btn>\n            </v-list-item>\n          </template>\n          <v-subheader v-if=\"sectionMenu\" class=\"white--text\"><h2>Sections</h2></v-subheader>\n          <v-list-item v-for=\"section in sectionMenu\" :href=\"'#section-'+section.name\" :key=\"section.name\" \n              :class=\"'#section-'+section.name === path ? 'highlighted' : ''\">\n            <v-list-item-content class=\"white--text\" v-if=\"!edit || !section.secondary\">\n              <v-list-item-title class=\"text-uppercase\"><h4>{{ section.title }}</h4></v-list-item-title>\n              <v-list-item-subtitle class=\"white--text\">{{ section.desc }}</v-list-item-subtitle>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list>\n  \n      </v-navigation-drawer>\n    </v-form>\n  </v-container>\n\n</template>\n\n<script>\nexport default {\n  name: \"ihris-resource\",\n  props: [\"title\",\"field\",\"fhir-id\",\"page\",\"profile\",\"section-menu\",\"edit\",\"links\",\"constraints\" ],\n  data: function() {\n    return {\n      fhir: {},\n      orig: {},\n      valid: true,\n      source: { data: {}, path: \"\" },\n      loading: false,\n      overlay: false,\n      isEdit: false,\n      linktext: [ ],\n      advancedValid: true,\n      path:''\n    }\n  },\n  created: function() {\n\n    if ( this.fhirId ) {\n      this.loading = true\n      //console.log(\"getting\",this.field,this.fhirId) \n      fetch( \"/fhir/\"+this.field+\"/\"+this.fhirId ).then(response => {\n        response.json().then(data => {\n          //this.$store.commit('setCurrentResource', data)\n          this.orig = data\n          this.source = { data: data, path: this.field }\n          this.setLinkText()\n          this.loading = false\n        }).catch(err=> {\n          console.log(this.field,this.fhirId,err)\n        })\n      }).catch(err=> {\n        console.log(this.field,this.fhirId,err)\n      })\n    } else if ( this.$route.query ) {\n      let presets = {\n        resourceType: this.field\n      }\n      let hasPresets = false\n      for( let path of Object.keys( this.$route.query ) ) {\n        if ( path.startsWith( this.field +\".\" ) ) {\n          hasPresets = true\n          let elements = path.substring( this.field.length+1 ).split('.')\n          let last = elements.pop()\n          let current = presets\n          for( let element of elements ) {\n            if ( element.includes('[') ) {\n              try {\n                let parts = element.split('[')\n                let name = parts[0]\n                let idx = parts[1].slice(0,-1)\n                if ( !current.hasOwnProperty(name) ) {\n                  current[name] = []\n                }\n                if ( idx ) {\n                  let next = {}\n                  current[name][parseInt(idx)] = next\n                  current = next\n                } else {\n                  let next = {}\n                  current[name].push( next )\n                  current = next\n                }\n              } catch( err ) {\n                console.log(\"Unable to process\",path)\n                continue\n              }\n            } else {\n              if ( !current.hasOwnProperty(element) ) {\n                current[element] = {}\n                current = current[element]\n              }\n            }\n          }\n          if ( last.includes('[') ) {\n            try {\n              let parts = last.split('[')\n              let name = parts[0]\n              let idx = parts[1].slice(0,-1)\n              if ( !current.hasOwnProperty(name) ) {\n                current[name] = []\n              }\n              if ( idx ) {\n                current[name][parseInt(idx)] = this.$route.query[path]\n              } else {\n                current[name].push( this.$route.query[path] )\n              }\n\n            } catch( err ) {\n              console.log(\"Unable to process\",path)\n              continue\n            }\n          } else {\n            current[last] = this.$route.query[path]\n          }\n        }\n      }\n      if ( hasPresets ) {\n        this.source = { data: presets, path: this.field }\n      }\n    }\n  },\n  watch : {\n    $route:function(to, from){\n\n     console.log(to,from)\n     console.log(\"HASH \", this.$route.hash)\n     this.path = this.$route.hash;\n\n    }\n  },\n  computed: {\n    hasFhirId: function() {\n      if ( this.fhirId == '' ) {\n        return false\n      } else if ( !this.fhirId ) {\n        return false\n      } else {\n        return true\n      }\n    }\n    /*\n    source: function() {\n      return this.$store.state.fhir\n    }\n    */\n  },\n  methods: {\n    getLinkField: function(field) {\n      let content = this.$fhirpath.evaluate( this.source.data, field )\n      if ( content ) {\n        return content[0]\n      } else {\n        return false\n      }\n    },\n    getLinkUrl: function(link) {\n      let field\n      if ( link.field ) {\n        field = this.getLinkField(link.field)\n      }\n      if ( field ) {\n        if ( field.includes('/') ) {\n          let ref = field.split('/')\n          field = ref[1]\n        }\n        return link.url.replace(\"FIELD\",field)\n      } else {\n        return link.url \n      }\n    },\n    setLinkText: function() {\n      for ( let idx in this.links ) {\n        let link = this.links[idx]\n        if ( link.text ) {\n          this.linktext[idx] = link.text\n        } else if ( link.field ) {\n          let field = this.getLinkField(link.field)\n          if ( field ) {\n            this.$fhirutils.lookup(field).then( display => {\n              this.$set( this.linktext, idx, display )\n            } )\n          }\n        }\n      }\n    },\n    processFHIR: async function() {\n      this.$refs.form.validate()\n      if ( !this.valid ) return\n      this.advancedValid = true\n      this.overlay = true\n      this.loading = true\n\n      //const processChildren = function( parent, obj, children ) {\n      const processChildren = async ( parent, obj, children ) => {\n        //console.log(\"called on \"+parent)\n\n        for( let child of children ) {\n\n          let fullField = parent\n\n          let next = obj\n\n          if ( child.field && !child.fieldType /* ignore arrays */ ) {\n            //console.log(\"working on \"+parent+\" . \"+child.field)\n            let field\n            if ( child.sliceName ) {\n              if ( child.field.startsWith(\"value[x]\") ) {\n                field = child.field.substring(9)\n                fullField += \".\" + field\n              } else {\n                field = child.field.replace(\":\"+child.sliceName, \"\")\n                fullField += \".\" + field\n              }\n            } else {\n              field = child.field\n              fullField += \".\"+field\n            }\n            if ( child.max !== \"1\" || child.baseMax !== \"1\" ) {\n              if ( !obj.hasOwnProperty(field) ) {\n                next[field] = []\n              }\n            } else {\n              next[field] = {}\n            }\n            //console.log(fullField)\n            //console.log(child.max, child.baseMax)\n            //console.log(child)\n            if ( child.hasOwnProperty(\"value\") ) {\n              //console.log( fullField +\"=\"+ child.value )\n              if ( Array.isArray( next[field] ) ) {\n                next[field].push( child.value )\n              } else {\n                next[field] = child.value\n              }\n              next = next[field]\n            } else {\n              if ( Array.isArray( next[field] ) ) {\n                let sub = {}\n                if ( child.profile ) {\n                  sub.url = child.profile\n                } else if ( field === \"extension\" && child.sliceName ) {\n                  sub.url = child.sliceName\n                }\n                next[field].push( sub )\n                next = sub\n              } else {\n                next = next[field]\n              }\n            }\n          }\n\n          if ( child.$children ) {\n            try { \n              await processChildren( fullField, next, child.$children )\n            } catch( err ) {\n              this.advancedValid = false\n              console.log(err)\n            }\n          } \n          if ( child.constraints ) {\n            child.errors = []\n            try {\n              this.advancedValid = this.advancedValid && await this.$fhirutils.checkConstraints( child.constraints, \n                this.constraints, next, child.errors, this.fhirId )\n            } catch( err ) {\n              this.advancedValid = false\n              child.errors.push(\"An unknown error occurred.\")\n              console.log(err)\n            }\n          }\n\n        }\n\n      }\n\n      //console.log(this.field)\n      this.fhir = { \n        resourceType: this.field,\n        meta: {\n          profile: [ this.profile ] \n        }\n      }\n      //console.log(this)\n      try {\n        await processChildren( this.field, this.fhir, this.$children )\n      } catch( err ) {\n        this.advancedValid = false\n        console.log(err)\n      }\n      if ( !this.advancedValid ) {\n        this.overlay = false\n        this.loading = false\n        this.$store.commit('setMessage', { type: 'error', text: 'There were errors on the form.' })\n        return\n      }\n      console.log(\"FINISHED PROCESS AND CHECK.\")\n      let url = \"/fhir/\"+this.field\n      let opts = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/fhir+json\"\n        },\n        redirect: 'manual',\n      } \n      if ( this.fhirId ) {\n        this.fhir.id = this.fhirId\n        url += \"/\" + this.fhirId\n        opts.method = \"PUT\"\n      }\n      opts.body = JSON.stringify(this.fhir)\n      console.log(\"SAVE\",url,this.fhir)\n      fetch( url, opts ).then(response => {\n        //console.log(response)\n        //console.log(response.headers)\n        if ( response.status === 201 || response.status === 200 ) {\n          response.json().then(data => {\n            this.overlay = false\n            this.loading = false\n            if ( this.fhirId ) {\n               this.$store.commit('setMessage', { type: 'success', text: 'Update successful.' } )\n               setTimeout(() => this.$router.go(0), 2000);\n              \n            } else {\n              this.$router.push({ name:\"resource_view\", params: {page: this.page, id: data.id } })\n            }\n          })\n        }\n      } )\n      //console.log(this.fhir)\n\n      /*\n      console.log(this.$scopedSlots.default())\n      processSlots( this.field, this.$scopedSlots.default() )\n      */\n    }\n  }\n}\n\n\n\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-resource.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-resource.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-resource.vue?vue&type=template&id=079cd45e&\"\nimport script from \"./ihris-resource.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-resource.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ihris-resource.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\ninstallComponents(component, {VBtn,VContainer,VDivider,VForm,VIcon,VList,VListItem,VListItemContent,VListItemSubtitle,VListItemTitle,VNavigationDrawer,VOverlay,VProgressCircular,VSpacer,VSubheader})\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-resource.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-resource.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ihris-element',{attrs:{\"edit\":_vm.edit,\"loading\":false},scopedSlots:_vm._u([{key:\"form\",fn:function(){return [_c('v-menu',{ref:\"menu\",attrs:{\"close-on-content-click\":false,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"290px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-text-field',_vm._g({attrs:{\"label\":_vm.label,\"prepend-inner-icon\":\"mdi-calendar\",\"readonly\":\"\",\"outlined\":\"\",\"hide-details\":\"auto\",\"rules\":_vm.rules,\"error-messages\":_vm.errors,\"dense\":\"\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.label)+\" \"),(_vm.required)?_c('span',{staticClass:\"red--text font-weight-bold\"},[_vm._v(\"*\")]):_vm._e()]},proxy:true}],null,true),model:{value:(_vm.displayValue),callback:function ($$v) {_vm.displayValue=$$v},expression:\"displayValue\"}},on))]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[(_vm.isEthiopian)?_c('v-container',{staticClass:\"ma-0 pa-0\"},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-card',{attrs:{\"min-width\":\"300px\"}},[_c('v-card-title',{staticClass:\"primary white--text\"},[_vm._v(\" Ethiopian Calendar\"),_c('v-spacer'),_c('v-btn',{staticClass:\"white--text\",attrs:{\"dark\":\"\",\"icon\":\"\",\"group\":\"\",\"small\":\"\"},on:{\"click\":function($event){_vm.showGregorian = !_vm.showGregorian}}},[(!_vm.showGregorian)?_c('v-icon',[_vm._v(\"mdi-calendar-multiple\")]):_c('v-icon',[_vm._v(\"mdi-calendar\")])],1)],1),(_vm.pickerType==='year')?_c('v-card-text',[_c('br'),_c('v-text-field',{attrs:{\"clearable\":\"\",\"type\":\"number\",\"disabled\":_vm.disabled,\"label\":_vm.label,\"min\":_vm.minYearET,\"max\":_vm.maxYearET,\"rules\":_vm.rules,\"error-messages\":_vm.errors,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},model:{value:(_vm.etValue),callback:function ($$v) {_vm.etValue=$$v},expression:\"etValue\"}})],1):_c('v-ethiopian-date-picker',{ref:\"etPicker\",attrs:{\"label\":\"Ethiopian\",\"color\":\"secondary\",\"landscape\":_vm.$vuetify.breakpoint.smAndUp,\"max\":_vm.maxValueETDate,\"min\":_vm.minValueETDate,\"type\":_vm.pickerType,\"disabled\":_vm.disabled,\"locale\":\"am\"},on:{\"change\":_vm.save},model:{value:(_vm.etValue),callback:function ($$v) {_vm.etValue=$$v},expression:\"etValue\"}})],1),(_vm.showGregorian)?_c('v-card',{attrs:{\"min-width\":\"300px\"}},[_c('v-card-title',{staticClass:\"primary white--text\"},[_vm._v(\" Gregorian Calendar\"),_c('v-spacer'),_c('v-btn',{staticClass:\"white--text\",attrs:{\"dark\":\"\",\"icon\":\"\",\"group\":\"\",\"small\":\"\"},on:{\"click\":function($event){_vm.showGregorian = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),(_vm.pickerType==='year')?_c('v-card-text',[_c('br'),_c('v-text-field',{attrs:{\"clearable\":\"\",\"type\":\"number\",\"disabled\":_vm.disabled,\"label\":_vm.label,\"min\":_vm.minYear,\"max\":_vm.maxYear,\"rules\":_vm.rules,\"error-messages\":_vm.errors,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1):_c('v-date-picker',{ref:\"gPicker\",attrs:{\"color\":\"secondary\",\"landscape\":_vm.$vuetify.breakpoint.smAndUp,\"max\":_vm.dateValueMax,\"min\":_vm.dateValueMin,\"type\":_vm.pickerType,\"disabled\":_vm.disabled},on:{\"change\":_vm.save},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1):_vm._e()],1)],1):(_vm.pickerType==='year')?_c('v-card',{attrs:{\"min-width\":\"300px\"}},[_c('v-card-text',[_c('br'),_c('v-text-field',{attrs:{\"type\":\"number\",\"disabled\":_vm.disabled,\"label\":_vm.label,\"min\":_vm.minYear,\"max\":_vm.maxYear,\"rules\":_vm.rules,\"error-messages\":_vm.errors,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)],1):_c('v-date-picker',{ref:\"picker\",attrs:{\"color\":\"secondary\",\"landscape\":_vm.$vuetify.breakpoint.smAndUp,\"max\":_vm.dateValueMax,\"min\":_vm.dateValueMin,\"type\":_vm.pickerType,\"disabled\":_vm.disabled},on:{\"change\":_vm.save},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]},proxy:true},{key:\"header\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.label)+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.displayValue)+\" \")]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n      <v-menu \n        ref=\"menu\" \n        v-model=\"menu\" \n        :close-on-content-click=\"false\" \n        transition=\"scale-transition\" \n        offset-y \n        min-width=\"290px\"\n      >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"label\"\n            prepend-inner-icon=\"mdi-calendar\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            dense\n          >\n            <template #label>{{label}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n        <v-container class=\"ma-0 pa-0\" v-if=\"isEthiopian\">\n          <v-row no-gutters>\n            <v-card min-width=\"300px\">\n              <v-card-title class=\"primary white--text\">\n                Ethiopian Calendar<v-spacer/><v-btn\n                  dark\n                  class=\"white--text\"\n                  icon\n                  @click=\"showGregorian = !showGregorian\"\n                  group\n                  small\n                  ><v-icon v-if=\"!showGregorian\" >mdi-calendar-multiple</v-icon><v-icon v-else>mdi-calendar</v-icon></v-btn>\n              </v-card-title>\n              <v-card-text v-if=\"pickerType==='year'\">\n                <br />\n                <v-text-field \n                  v-model=\"etValue\" \n                  clearable\n                  type=\"number\" \n                  :disabled=\"disabled\" \n                  :label=\"label\" \n                  :min=\"minYearET\" \n                  :max=\"maxYearET\" \n                  :rules=\"rules\" \n                  :error-messages=\"errors\"\n                  @change=\"errors = []\"\n                  dense\n                >\n                </v-text-field>\n              </v-card-text>\n              <v-ethiopian-date-picker\n                v-else\n                ref=\"etPicker\"\n                label=\"Ethiopian\"\n                color=\"secondary\"\n                :landscape=\"$vuetify.breakpoint.smAndUp\"\n                v-model=\"etValue\"\n                :max=\"maxValueETDate\"\n                :min=\"minValueETDate\"\n                :type=\"pickerType\"\n                :disabled=\"disabled\"\n                @change=\"save\"\n                locale=\"am\"\n                ></v-ethiopian-date-picker>\n            </v-card>\n            <v-card v-if=\"showGregorian\" min-width=\"300px\">\n              <v-card-title class=\"primary white--text\">\n                Gregorian Calendar<v-spacer/><v-btn\n                  dark\n                  class=\"white--text\"\n                  icon\n                  @click=\"showGregorian = false\"\n                  group\n                  small\n                  ><v-icon>mdi-close</v-icon></v-btn>\n              </v-card-title>\n              <v-card-text v-if=\"pickerType==='year'\">\n                <br />\n                <v-text-field \n                  v-model=\"value\" \n                  clearable\n                  type=\"number\" \n                  :disabled=\"disabled\" \n                  :label=\"label\" \n                  :min=\"minYear\" \n                  :max=\"maxYear\" \n                  :rules=\"rules\" \n                  :error-messages=\"errors\"\n                  @change=\"errors = []\"\n                  dense\n                >\n                </v-text-field>\n              </v-card-text>\n              <v-date-picker\n                v-else\n                ref=\"gPicker\"\n                color=\"secondary\"\n                :landscape=\"$vuetify.breakpoint.smAndUp\"\n                v-model=\"value\"\n                :max=\"dateValueMax\"\n                :min=\"dateValueMin\"\n                :type=\"pickerType\"\n                :disabled=\"disabled\"\n                @change=\"save\"\n                ></v-date-picker>\n            </v-card>\n          </v-row>\n        </v-container>\n        <v-card min-width=\"300px\" v-else-if=\"pickerType==='year'\" >\n          <v-card-text>\n            <br />\n            <v-text-field \n              v-model=\"value\" \n              type=\"number\" \n              :disabled=\"disabled\" \n              :label=\"label\" \n              :min=\"minYear\" \n              :max=\"maxYear\" \n              :rules=\"rules\" \n              :error-messages=\"errors\"\n              @change=\"errors = []\"\n              dense\n            >\n            </v-text-field>\n          </v-card-text>\n        </v-card>\n        <v-date-picker\n          v-else\n          ref=\"picker\"\n          color=\"secondary\"\n          :landscape=\"$vuetify.breakpoint.smAndUp\"\n          v-model=\"value\"\n          :max=\"dateValueMax\"\n          :min=\"dateValueMin\"\n          :type=\"pickerType\"\n          :disabled=\"disabled\"\n          @change=\"save\"\n          ></v-date-picker>\n\n      </v-menu>\n    </template>\n    <template #header>\n      {{label}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\nimport VEthiopianDatePicker from \"vuetify-ethiopian-calendar\"\nimport ethiopic from \"ethiopic-calendar\"\n\nexport default {\n  name: \"fhir-date\",\n  props: [\"field\",\"min\",\"max\",\"base-min\",\"base-max\", \"label\", \"slotProps\", \"path\", \"edit\",\"sliceName\", \n    \"minValueDate\", \"maxValueDate\", \"minValueQuantity\", \"maxValueQuantity\", \"displayType\",\"readOnlyIfSet\", \"calendar\",\n    \"constraints\" ],\n  components: {\n    IhrisElement,\n    VEthiopianDatePicker\n  },\n  data: function() {\n    return {\n      value: null,\n      etValue: null,\n      menu: false,\n      source: { path: \"\", data: {} },\n      qField: \"valueDate\",\n      pickerType: \"date\",\n      disabled: false,\n      showGregorian: false,\n      errors: [],\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE STRING\",this.field,this.slotProps)\n    this.setupData()\n  },\n  computed: {\n    dateValueMax: function() {\n      if ( this.maxValueQuantity ) {\n        let maxDate = this.convertQuantity( this.maxValueQuantity, \"add\" )\n        if ( maxDate ) {\n          return maxDate\n        }\n      } \n      if ( this.maxValueDate ) {\n        return this.maxValueDate\n      }\n      return undefined\n    },\n    dateValueMin: function() {\n      if ( this.minValueQuantity ) {\n        let minDate = this.convertQuantity( this.minValueQuantity, \"subtract\" )\n        if ( minDate ) {\n          return minDate\n        }\n      } else if ( this.minValueDate ) {\n        return this.minValueDate\n      }\n      return undefined\n    },\n    minYear: function() {\n      return this.dateValueMin ? this.dateValueMin.substring(0,4) : undefined\n    },\n    maxYear: function() {\n      return this.dateValueMax ? this.dateValueMax.substring(0,4) : undefined\n    },\n    minYearET: function() {\n      return this.minValueETDate ? this.minValueETDate.substring(0,4) : undefined\n    },\n    maxYearET: function() {\n      return this.maxValueETDate ? this.maxValueETDate.substring(0,4) : undefined\n    },\n    isEthiopian: function() {\n      return this.calendar === \"Ethiopian\"\n    },\n    minValueETDate: function() {\n      if ( this.dateValueMin ) {\n        return this.convertGE( this.dateValueMin )\n      } else {\n        return null\n      }\n    },\n    maxValueETDate: function() {\n      if ( this.dateValueMax ) {\n        return this.convertGE( this.dateValueMax )\n      } else {\n        return null\n      }\n    },\n    displayValue: function() {\n      if ( this.isEthiopian ) {\n        return this.value && \"Ethiopian: \" + this.etValue + \" Gregorian: \" + this.value \n      } else {\n        return this.value\n      }\n    },\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    required: function() {\n      return (this.index || 0) < this.min \n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.label+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  },\n  watch: {\n    menu (val) {\n      if ( this.pickerType !== 'year' ) {\n        if ( this.isEthiopian ) {\n          !this.value && val && setTimeout(() => (this.$refs.etPicker.activePicker = 'YEAR'))\n        } else {\n          !this.value && val && setTimeout(() => (this.$refs.picker.activePicker = 'YEAR'))\n        }\n      }\n    },\n    showGregorian (val) {\n      !this.value && val && setTimeout(() => (this.$refs.gPicker.activePicker = 'YEAR'))\n    },\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH STRING\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    value (val) {\n      if ( !val ) {\n        this.etValue = val\n      } else if ( this.pickerType === 'year' ) {\n        if ( val.length === 4 ) {\n          this.etValue = this.convertGE( val )\n        }\n       } else {\n        this.etValue = this.convertGE( val )\n      }\n      /*\n      const [ year, month, day ] = val.split('-').map(Number)\n      let etDate = ethiopic.ge( year, month || 1, day  || 1)\n      this.etValue = etDate.year.toString().padStart(4,'0') + \"-\" + etDate.month.toString().padStart(2,'0') + \"-\" + etDate.day.toString().padStart(2, '0')\n      */\n    },\n    etValue (val) {\n      if ( !val ) {\n        this.value = val\n      } else if ( this.pickerType === 'year' ) {\n        if ( val.length === 4 ) {\n          this.value = this.convertEG( val )\n        }\n      } else {\n        this.value = this.convertEG( val )\n      }\n      /*\n      const [ etYear, etMonth, etDay ] = val.split('-').map(Number)\n      let gDate = ethiopic.eg( etYear, etMonth || 1, etDay  || 1)\n      this.value = gDate.year.toString().padStart(4,'0') + \"-\" + gDate.month.toString().padStart(2,'0') + \"-\" + gDate.day.toString().padStart(2, '0')\n      */\n    }\n  },\n  methods: {\n    convertQuantity(val, direction) {\n      const unitsofmeasure = {\n        'a': 'years',\n        'mo': 'months',\n        'wk': 'weeks',\n        'd': 'days',\n      }\n      const quant = /(-?\\d+)([a-z]{1,3})/\n\n      let match = val.match( quant )\n      if ( match.length === 3 ) {\n        try {\n          let value = match[1]\n          let unit = unitsofmeasure[ match[2] ]\n          if ( direction === \"subtract\" ) {\n            return this.$moment( this.$moment().subtract(value, unit) ).format('YYYY-MM-DD')\n          } else {\n            return this.$moment( this.$moment().add(value, unit) ).format('YYYY-MM-DD')\n          }\n        } catch (e) {\n          console.log(\"Failed to get date from quantity\",e)\n        }\n      }\n      return undefined\n    },\n    convertGE(val) {\n      if ( !val ) return val\n      const [ year, month, day ] = val.split('-').map(Number)\n      if ( this.pickerType === 'year' ) {\n        let etDate = ethiopic.ge( year, month || 6, day || 1) // so it will be the same year in both directions\n        return etDate.year.toString().padStart(4,'0') \n      } else {\n        let etDate = ethiopic.ge( year, month || 1, day || 1)\n        return etDate.year.toString().padStart(4,'0') + \"-\" + etDate.month.toString().padStart(2,'0') + \"-\" + etDate.day.toString().padStart(2, '0')\n      }\n    },\n    convertEG(val) {\n      if ( !val ) return val\n      const [ etYear, etMonth, etDay ] = val.split('-').map(Number)\n      if ( this.pickerType === 'year' ) {\n        let gDate = ethiopic.eg( etYear, etMonth|| 6, etDay || 1) // so it will be the same year in both directions\n        return gDate.year.toString().padStart(4,'0') \n      } else {\n        let gDate = ethiopic.eg( etYear, etMonth || 1, etDay || 1)\n        return gDate.year.toString().padStart(4,'0') + \"-\" + gDate.month.toString().padStart(2,'0') + \"-\" + gDate.day.toString().padStart(2, '0')\n      }\n    },\n    setupData() {\n      if ( this.displayType ) {\n        this.pickerType = this.displayType\n      }\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n    },\n    save (date) {\n      this.errors = []\n      this.$refs.menu.save(date)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-date.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-date.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-date.vue?vue&type=template&id=51479092&\"\nimport script from \"./fhir-date.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-date.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDatePicker } from 'vuetify/lib/components/VDatePicker';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VContainer,VDatePicker,VIcon,VMenu,VRow,VSpacer,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ihris-complex-card',{attrs:{\"complexField\":_vm.field,\"slotProps\":_vm.slotProps,\"label\":_vm.label,\"errors\":_vm.errors},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_vm._t(\"default\",null,{\"source\":slotProps.source})]}}],null,true)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-complex-card \n    :complexField=\"field\"\n    :slotProps=\"slotProps\"\n    :label=\"label\"\n    :errors=\"errors\"\n  >\n    <template #default=\"slotProps\">\n      <slot :source=\"slotProps.source\"></slot>\n    </template>\n  </ihris-complex-card>\n\n</template>\n\n<script>\nimport IhrisComplexCard from \"../ihris/ihris-complex-card.vue\"\n\nexport default {\n  name: \"fhir-human-name\",\n  props: [\"field\", \"slotProps\",\"sliceName\",\"min\",\"max\",\"base-min\",\"base-max\",\"label\",\"path\", \"edit\",\"constraints\"],\n  data: function() {\n    return {\n      errors: []\n    }\n  },\n  components: {\n    IhrisComplexCard\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-human-name.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-human-name.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-human-name.vue?vue&type=template&id=f50668ec&\"\nimport script from \"./fhir-human-name.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-human-name.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-secondary.vue?vue&type=style&index=0&id=2a8e5801&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-secondary.vue?vue&type=style&index=0&id=2a8e5801&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-practitioner-intro.vue?vue&type=style&index=0&id=23658de9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-practitioner-intro.vue?vue&type=style&index=0&id=23658de9&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.edit)?_c('v-container',[_vm._t(\"form\")],2):_c('div',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"font-weight-bold\",attrs:{\"cols\":_vm.$store.state.cols.header}},[_vm._t(\"header\")],2),(_vm.loading)?_c('v-col',{attrs:{\"cols\":_vm.$store.state.cols.content}},[_c('v-progress-linear',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1):_c('v-col',{attrs:{\"cols\":_vm.$store.state.cols.content}},[_vm._t(\"value\")],2)],1),_c('v-divider')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-container v-if=\"edit\">\n      <slot name=\"form\"></slot>\n    </v-container>\n    <div v-else>\n      <v-row dense>\n        <v-col :cols=\"$store.state.cols.header\" class=\"font-weight-bold\">\n          <slot name=\"header\"></slot>\n        </v-col>\n        <v-col :cols=\"$store.state.cols.content\" v-if=\"loading\">\n          <v-progress-linear indeterminate color=\"primary\"></v-progress-linear>\n        </v-col>\n        <v-col :cols=\"$store.state.cols.content\" v-else>\n          <slot name=\"value\"></slot>\n        </v-col>\n      </v-row>\n      <v-divider></v-divider>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ihris-element\",\n  props: [ \"edit\", \"loading\" ]\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-element.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-element.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-element.vue?vue&type=template&id=61b3b392&\"\nimport script from \"./ihris-element.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-element.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VContainer,VDivider,VProgressLinear,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ihris-element',{attrs:{\"edit\":_vm.edit,\"loading\":false},scopedSlots:_vm._u([{key:\"form\",fn:function(){return [_c('v-text-field',{attrs:{\"error-messages\":_vm.errors,\"disabled\":_vm.disabled,\"label\":_vm.display,\"outlined\":\"\",\"hide-details\":\"auto\",\"rules\":_vm.rules,\"type\":_vm.isPassword ? (_vm.showPassword ? 'text' : 'password') : 'text',\"append-icon\":_vm.isPassword ? (_vm.showPassword ? 'mdi-eye' : 'mdi-eye-off') : '',\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []},\"click:append\":function($event){_vm.showPassword = !_vm.showPassword}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.display)),(_vm.required)?_c('span',{staticClass:\"red--text font-weight-bold\"},[_vm._v(\"*\")]):_vm._e()]},proxy:true}]),model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})]},proxy:true},{key:\"header\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.display)+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.value)+\" \")]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n      <v-text-field \n        :error-messages=\"errors\" \n        @change=\"errors = []\" \n        :disabled=\"disabled\" \n        :label=\"display\" \n        v-model=\"value\" \n        outlined \n        hide-details=\"auto\" \n        :rules=\"rules\" \n        :type=\"isPassword ? (showPassword ? 'text' : 'password') : 'text'\"\n        :append-icon=\"isPassword ? (showPassword ? 'mdi-eye' : 'mdi-eye-off') : ''\"\n        @click:append=\"showPassword = !showPassword\"\n        dense\n      >\n      <template #label>{{display}}<span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-text-field>\n    </template>\n    <template #header>\n      {{display}}\n    </template>\n    <template #value>\n      {{value}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\nexport default {\n  name: \"fhir-string\",\n  props: [\"field\", \"label\", \"min\", \"max\", \"id\", \"path\", \"slotProps\", \"sliceName\",\"base-min\",\"base-max\",\"edit\",\"readOnlyIfSet\",\n    \"constraints\", \"displayType\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      source: { path: \"\", data: {} },\n      value: \"\",\n      showPassword: false,\n      qField: \"valueString\",\n      disabled: false,\n      errors: [],\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE STRING\",this.field,this.slotProps)\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH STRING\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n    }\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    required: function() {\n      return (this.index || 0) < this.min \n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.display+\" is required\" ]\n      } else {\n        return []\n      }\n    },\n    isPassword: function() {\n      return this.displayType === 'password'\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-string.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-string.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-string.vue?vue&type=template&id=6f552b9c&\"\nimport script from \"./fhir-string.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-string.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.simpleDisplay)?_c('div',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"font-weight-bold\",attrs:{\"cols\":_vm.$store.state.cols.header}},[_vm._v(_vm._s(_vm.label))]),_c('v-col',{attrs:{\"cols\":_vm.$store.state.cols.header}},[_vm._v(_vm._s(_vm.simpleValue))])],1),_c('v-divider')],1):_c('v-container',[_c('v-card',[(_vm.edit)?_c('v-system-bar',{attrs:{\"color\":\"secondary\",\"dark\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.label)+\" \"),_c('v-spacer'),(_vm.subAvailable)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.removeRow()}}},[_c('v-icon',{staticClass:\"font-weight-bold\"},[_vm._v(\"mdi-minus\")])],1):_vm._e(),(_vm.addAvailable)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.addRow()}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1):_vm._e()],1):_vm._e(),_vm._l((_vm.inputs),function(input){return _vm._t(\"default\",null,{\"input\":input,\"source\":input.source})})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div v-if=\"simpleDisplay\">\n      <v-row dense>\n        <v-col :cols=\"$store.state.cols.header\" class=\"font-weight-bold\">{{label}}</v-col><v-col :cols=\"$store.state.cols.header\">{{simpleValue}}</v-col>\n      </v-row>\n      <v-divider></v-divider>\n    </div>\n    <v-container v-else>\n      <v-card>\n        <v-system-bar\n          color=\"secondary\"\n          dark\n          v-if=\"edit\"\n          >\n          {{ label }}\n          <v-spacer></v-spacer>\n          <v-btn v-if=\"subAvailable\" icon @click=\"removeRow()\"><v-icon class=\"font-weight-bold\">mdi-minus</v-icon></v-btn>\n          <v-btn v-if=\"addAvailable\" icon @click=\"addRow()\"><v-icon>mdi-plus</v-icon></v-btn>\n        </v-system-bar>\n        <slot v-for=\"input in inputs\" :input=\"input\" :source=\"input.source\"></slot>\n      </v-card>\n    </v-container>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ihris-array\",\n  props: [\"label\", \"min\", \"max\", \"id\", \"path\", \"slotProps\", \"field\", \"fieldType\", \"profile\", \"targetProfile\", \"sliceName\", \"edit\" ],\n  data: function() {\n    return {\n      inputs: [],\n      source: { path: \"\", data: [] },\n      isArray: true,\n      lockWatch: false\n    }\n  },\n  created: function() {\n    this.setupInputs()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        if ( !this.lockWatch ) {\n          //console.log(\"WATCHARR\",this.path,this.slotProps.source)\n          this.setupInputs()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupInputs: function() {\n      this.inputs = []\n      this.source = { path: this.path, data: {} }\n      let path = this.path\n      if ( this.slotProps && this.slotProps.source ) {\n        let expression = this.field\n        if ( this.sliceName ) {\n          expression = this.field.replace(/([^:]+):(.+)/, \"$1.where(url='\"+this.profile+\"')\")\n        }\n        this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression)\n        if ( this.source.data.length > 0 ) {\n          this.lockWatch = true\n        }\n      }\n      for( let idx = 0; idx < this.actualMin; idx++ ) {\n        let label = this.label\n        if ( this.displayIndex ) {\n          label += \" (\"+(idx+1)+\")\"\n        }\n        let input = { label: label, index: idx, data: undefined } \n        if ( this.source.data[idx] ) {\n          input.source = { data: this.source.data[idx], path: path+\"[\"+idx+\"]\", fromArray: true }\n        }\n        this.inputs.push( input )\n      }\n    },\n    addRow: function() {\n      this.lockWatch = true\n      if ( this.addAvailable ) {\n        let label = this.label\n        if ( this.displayIndex ) {\n          label += \" (\"+(this.inputs.length+1)+\")\"\n        }\n        this.inputs.push( { label: label, index: this.inputs.length } )\n      }\n    },\n    removeRow: function() {\n      if ( this.subAvailable ) {\n        this.inputs.splice(-1)\n      }\n    },\n    getField: function() {\n      return this.field\n    }\n  },\n  computed: {\n    actualMin: function() {\n      return Math.max( this.min, ( this.source.data.length > 0 ? this.source.data.length : 0 ) )\n      //return this.min < 1 ? 1 : this.min\n    },\n    addAvailable: function() {\n      return this.max === \"*\" || this.inputs.length < this.max\n    },\n    displayIndex: function() {\n      return this.max === \"*\" || this.max > 1\n    },\n    subAvailable: function() {\n      return this.actualMin < this.inputs.length\n    },\n    simpleDisplay: function() {\n      return !this.edit && [ \"string\" ].includes(this.fieldType)\n    },\n    simpleValue: function() {\n      return this.source.data.join(\" \")\n    }\n\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-array.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-array.vue?vue&type=script&lang=js&\"","// Styles\nimport './VSystemBar.sass'\n\n// Mixins\nimport Applicationable from '../../mixins/applicationable'\nimport Colorable from '../../mixins/colorable'\nimport Themeable from '../../mixins/themeable'\n\n// Utilities\nimport mixins from '../../util/mixins'\nimport { convertToUnit, getSlot } from '../../util/helpers'\n\n// Types\nimport { VNode } from 'vue/types'\n\nexport default mixins(\n  Applicationable('bar', [\n    'height',\n    'window',\n  ]),\n  Colorable,\n  Themeable\n/* @vue/component */\n).extend({\n  name: 'v-system-bar',\n\n  props: {\n    height: [Number, String],\n    lightsOut: Boolean,\n    window: Boolean,\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-system-bar--lights-out': this.lightsOut,\n        'v-system-bar--absolute': this.absolute,\n        'v-system-bar--fixed': !this.absolute && (this.app || this.fixed),\n        'v-system-bar--window': this.window,\n        ...this.themeClasses,\n      }\n    },\n    computedHeight (): number | string {\n      if (this.height) {\n        return isNaN(parseInt(this.height)) ? this.height : parseInt(this.height)\n      }\n\n      return this.window ? 32 : 24\n    },\n    styles (): object {\n      return {\n        height: convertToUnit(this.computedHeight),\n      }\n    },\n  },\n\n  methods: {\n    updateApplication () {\n      return this.$el\n        ? this.$el.clientHeight\n        : this.computedHeight\n    },\n  },\n\n  render (h): VNode {\n    const data = {\n      staticClass: 'v-system-bar',\n      class: this.classes,\n      style: this.styles,\n      on: this.$listeners,\n    }\n\n    return h('div', this.setBackgroundColor(this.color, data), getSlot(this))\n  },\n})\n","import { render, staticRenderFns } from \"./ihris-array.vue?vue&type=template&id=a4968bf4&\"\nimport script from \"./ihris-array.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-array.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSystemBar } from 'vuetify/lib/components/VSystemBar';\ninstallComponents(component, {VBtn,VCard,VCol,VContainer,VDivider,VIcon,VRow,VSpacer,VSystemBar})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ihris-complex-card',{attrs:{\"complexField\":_vm.field,\"slotProps\":_vm.slotProps,\"label\":_vm.label,\"errors\":_vm.errors},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_vm._t(\"default\",null,{\"source\":slotProps.source})]}}],null,true)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-complex-card\n    :complexField=\"field\"\n    :slotProps=\"slotProps\"\n    :label=\"label\"\n    :errors=\"errors\"\n  >\n    <template #default=\"slotProps\">\n      <slot :source=\"slotProps.source\"></slot>\n    </template>\n  </ihris-complex-card>\n</template>\n\n<script>\nimport IhrisComplexCard from \"../ihris/ihris-complex-card.vue\"\nexport default {\n  name: \"fhir-identifier\",\n  props: [\"field\", \"slotProps\",\"sliceName\",\"min\",\"max\",\"base-min\",\"base-max\",\"label\",\"path\",\"edit\",\"constraints\"],\n  data: function() {\n    return {\n      errors: []\n    }\n  },\n  components: {\n    IhrisComplexCard\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-identifier.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-identifier.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-identifier.vue?vue&type=template&id=5c6756e8&\"\nimport script from \"./fhir-identifier.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-identifier.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.edit || !_vm.secondary)?_c('div',{staticClass:\"ihris-section\",attrs:{\"id\":'section-'+_vm.name}},[_c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"700\",\"outlined\":\"\"}},[_c('v-card-title',{staticClass:\"primary darken-1 white--text text-uppercase font-weight-bold\"},[_vm._v(_vm._s(_vm.title)+\" \")]),_c('v-card-text',{staticClass:\"my-3\"},[_vm._t(\"default\",null,{\"source\":_vm.slotProps.source})],2)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :id=\"'section-'+name\" class=\"ihris-section\" v-if=\"!edit || !secondary\" >\n    <v-card \n      class=\"mx-auto\"\n      max-width=\"700\"\n      outlined\n      >\n      <v-card-title class=\"primary darken-1 white--text text-uppercase font-weight-bold\">{{ title }}\n      </v-card-title>\n      <v-card-text class=\"my-3\">\n        <slot :source=\"slotProps.source\"></slot>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ihris-section\",\n  props: [\"name\", \"slotProps\",\"title\",\"description\", \"edit\", \"secondary\"],\n  data: function() {\n    return {\n      //source: { path: \"\", data: {} }\n    }\n  },\n  created: function() {\n    //this.setupData()\n  },\n  watch: {\n    /*\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH SECTION\",this.path,this.slotProps.source)\n        this.setupData()\n      },\n      deep: true\n    }\n    */\n  },\n  methods: {\n    /*\n    setupData: function() {\n      if ( this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, this.field )\n      }\n    }\n    */\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-section.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-section.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-section.vue?vue&type=template&id=4a68c4c2&\"\nimport script from \"./ihris-section.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-section.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCard,VCardText,VCardTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ihris-element',{attrs:{\"edit\":_vm.edit,\"loading\":_vm.loading},scopedSlots:_vm._u([{key:\"form\",fn:function(){return [_c('v-select',{attrs:{\"loading\":_vm.loading,\"label\":_vm.display,\"items\":_vm.items,\"outlined\":\"\",\"hide-details\":\"auto\",\"error-messages\":_vm.errors,\"item-text\":\"display\",\"item-value\":\"code\",\"disabled\":_vm.disabled,\"rules\":_vm.rules,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.display)+\" \"),(_vm.required)?_c('span',{staticClass:\"red--text font-weight-bold\"},[_vm._v(\"*\")]):_vm._e()]},proxy:true}]),model:{value:(_vm.valueCode),callback:function ($$v) {_vm.valueCode=$$v},expression:\"valueCode\"}})]},proxy:true},{key:\"header\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.display)+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.valueDisplay || _vm.value.display || \"\")+\" \")]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-element :edit=\"edit\" :loading=\"loading\">\n    <template #form>\n      <v-select \n        :loading=\"loading\" \n        :label=\"display\" \n        v-model=\"valueCode\" \n        :items=\"items\" \n        outlined \n        hide-details=\"auto\" \n        :error-messages=\"errors\"\n        item-text=\"display\"\n        item-value=\"code\"\n        :disabled=\"disabled\"\n        :rules=\"rules\"\n        dense\n        @change=\"errors = []\"\n      >\n        <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-select>\n    </template>\n    <template #header>\n      {{display}}\n    </template>\n    <template #value>\n      {{valueDisplay || value.display || \"\"}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\n/*\nconst itemSort = (a,b) => {\n  return (a.display === b.display ? (a.code === b.code ? 0 : (a.code < b.code ? -1: 1)) : (a.display < b.display ? -1 : 1) )\n}\n*/\nexport default {\n  name: \"fhir-coding\",\n  props: [\"field\",\"label\",\"sliceName\",\"targetprofile\",\"min\",\"max\",\"base-min\",\"base-max\",\"slotProps\",\"path\",\"binding\",\"edit\",\"readOnlyIfSet\",\n    \"constraints\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      value: { system: \"\", code: \"\", display: \"\" },\n      valueCode: \"\",\n      valueDisplay: \"\",\n      loading: true,\n      errors: [],\n      //error: false,\n      items: [],\n      source: { path: \"\", data: {}, binding: this.binding },\n      disabled: false,\n      lockWatch: false\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH CODING\",this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    valueCode: function( code ) {\n      if ( this.items ) {\n        let findValue = this.items.find( item => item.code === code )\n        if ( findValue ) {\n          this.value = findValue\n        }\n      }\n      if ( this.value.system && this.value.code ) {\n        this.$fhirutils.codeLookup( this.value.system, this.value.code, this.binding || this.source.binding ).then( display => {\n          this.valueDisplay = display\n        } )\n      }\n    }\n  },\n  methods: {\n    setupData: function() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {}, \n          binding: this.binding || this.slotProps.source.binding }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          // Need to see if this works and figure out what it needs to be\n          if ( this.source.data ) {\n            this.value = this.source.data\n            this.valueCode = this.value.code\n            this.lockWatch = true\n            //console.log(\"set\",this.value,this.valueCode)\n          }\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"FPATH info\",this.path,this.slotProps)\n          //console.log(\"FPATH setting value to\",this.field,this.source.data[0],expression,this.slotProps.source.data)\n          if ( this.source.data[0] ) {\n            this.value = this.source.data[0]\n            this.valueCode = this.value.code\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.valueCode)\n      }\n      let binding = this.binding || this.slotProps.source.binding\n      this.$fhirutils.expand( binding ).then( items => {\n        this.items = items \n        this.loading = false\n      } ).catch( err => {\n        console.log(err)\n        //this.error = true\n        this.errors = err.message\n        this.loading = false\n      } )\n      //console.log(\"CODING\",binding)\n      /*\n      let lastSlash = binding.lastIndexOf('/')\n      let lastPipe = binding.lastIndexOf('|')\n      let valueSetId = binding.slice(lastSlash+1, (lastPipe !== -1 ? lastPipe : binding.length ))\n      //console.log(\"CODING\",lastSlash,lastPipe,valueSetId)\n      fetch(\"/fhir/ValueSet/\"+valueSetId+\"/$expand\").then(response=> {\n        if( response.ok ) {\n          response.json().then(data=>{\n            try {\n              if ( data.expansion.contains && data.expansion.contains.length > 0 ) {\n                if ( data.expansion.contains[0].hasOwnProperty(\"display\") ) {\n                  this.items = data.expansion.contains\n                } else if ( data.compose && data.compose.include ) {\n                  this.items = data.expansion.contains.map( code => {\n                    let include = data.compose.include.find( inc => inc.system === code.system )\n                    if ( include && include.concept ) {\n                      let display = include.concept.find( concept => concept.code === code.code )\n                      if ( display ) {\n                        code.display = display.display\n                      }\n                    }\n                    return code\n                  } )\n                }\n              }\n              this.items.sort( itemSort )\n            } catch(err) {\n              this.error = true\n              this.errors = \"Invalid response from server.\"\n            }\n            this.loading = false\n          }).catch(err=>{\n            this.errors = err.message\n            this.error = true\n            this.loading = false\n          })\n        } else {\n          // Try loading valueset without expansion if expand failed.\n          console.log(\"Failed to get ValueSet Expansion for \"+valueSetId)\n          fetch(\"/fhir/ValueSet/\"+valueSetId).then(response=> {\n            if ( response.ok ) {\n              response.json().then(data=> {\n                this.items = []\n                if ( data.compose && data.compose.include ) {\n                  for( let include of data.compose.include ) {\n                    if ( include.concept ) {\n                      for ( let concept of include.concept ) {\n                        concept.system = include.system\n                        this.items.push( concept )\n                        //this.items.push( { system: include.system, ...concept } )\n                      }\n                    }\n                  }\n                }\n                this.items.sort( itemSort )\n                this.loading = false\n              }).catch(err=>{\n                this.errors = err.message\n                this.error = true\n                this.loading = false\n              })\n            } else {\n              this.error = true\n              this.errors = \"Invalid response from server.\"\n              this.loading = false\n            }\n          }).catch(err=>{\n            this.errors = err.message\n            this.error = true\n            this.loading = false\n          })\n\n        }\n      }).catch(err=>{\n        this.errors = err.message\n        this.error = true\n        this.loading = false\n      })\n      */\n    }\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.display+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n    /*\n    displayValue: function() {\n      let found = this.items.find( item => item.code === this.valueCode )\n      if ( found ) {\n        return found.display\n      } else {\n        return \"\"\n      }\n    }\n    */\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-coding.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fhir-coding.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-coding.vue?vue&type=template&id=7e3eeec6&\"\nimport script from \"./fhir-coding.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-coding.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VSelect})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-card-subtitle',{staticClass:\"primary--text text-uppercase font-weight-bold\"},[_vm._v(_vm._s(_vm.display))]),_vm._l((_vm.errors),function(error,idx){return _c('v-card-text',{key:idx,staticClass:\"error white--text font-weight-bold\"},[_vm._v(_vm._s(error))])}),_c('v-card-text',[_vm._t(\"default\",null,{\"source\":_vm.source})],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card>\n    <v-card-subtitle class=\"primary--text text-uppercase font-weight-bold\">{{ display }}</v-card-subtitle>\n    <v-card-text v-for=\"(error,idx) in errors\" :key=\"idx\" class=\"error white--text font-weight-bold\">{{error}}</v-card-text>\n    <v-card-text>\n      <slot :source=\"source\"></slot>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nexport default {\n  name: \"ihris-complex-card\",\n  props: [\"complexField\", \"slotProps\",\"label\",\"errors\"],\n  data: function() {\n    return {\n      source: { path: \"\", data: {} }\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH COMPLEX CARD\",this.path,this.slotProps)\n        this.setupData()\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData: function() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.complexField, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.complexField )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n        }\n        //console.log(this.source)\n      }\n    }\n  },\n  computed: {\n    display: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.label\n      else return this.label\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-complex-card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ihris-complex-card.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-complex-card.vue?vue&type=template&id=87b150fa&\"\nimport script from \"./ihris-complex-card.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-complex-card.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCard,VCardSubtitle,VCardText})\n"],"sourceRoot":""}